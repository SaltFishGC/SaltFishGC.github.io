import{_ as s,c as a,e,o as p}from"./app-Cm4IjFjh.js";const t={};function c(l,n){return p(),a("div",null,[...n[0]||(n[0]=[e(`<p><code>IService</code> æ˜¯ <strong>MyBatis-Plusï¼ˆMPï¼‰</strong> æä¾›çš„ä¸€ä¸ª<strong>é€šç”¨ Service å±‚æ¥å£</strong>ï¼Œå®ƒå°è£…äº†å¤§é‡å¸¸ç”¨çš„ CRUD æ“ä½œï¼ˆæ¯” <code>BaseMapper</code> æ›´é«˜å±‚ï¼‰ï¼Œè®©ä½ åœ¨ Service å±‚å‡ ä¹ä¸ç”¨å†™é‡å¤ä»£ç ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚</p><hr><h2 id="ä¸€ã€æ ¸å¿ƒå®šä½" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒå®šä½"><span>ä¸€ã€æ ¸å¿ƒå®šä½</span></a></h2><table><thead><tr><th>å±‚çº§</th><th>MP æä¾›çš„æŠ½è±¡</th></tr></thead><tbody><tr><td><strong>DAO/Mapper å±‚</strong></td><td><code>BaseMapper&lt;T&gt;</code>ï¼ˆ17+ ä¸ªæ–¹æ³•ï¼‰</td></tr><tr><td><strong>Service å±‚</strong></td><td><code>IService&lt;T&gt;</code>ï¼ˆ<strong>60+ ä¸ªæ–¹æ³•</strong>ï¼Œå«æ‰¹é‡ã€é“¾å¼ã€åˆ†é¡µã€Lambda ç­‰ï¼‰</td></tr></tbody></table><blockquote><p>âœ… <code>IService</code> æ˜¯å¯¹ <code>BaseMapper</code> çš„è¿›ä¸€æ­¥å°è£…ï¼Œ<strong>å†…ç½®äº‹åŠ¡ã€æ‰¹å¤„ç†ä¼˜åŒ–ã€é“¾å¼è°ƒç”¨æ”¯æŒ</strong>ã€‚</p></blockquote><hr><h2 id="äºŒã€åŸºæœ¬ä½¿ç”¨æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#äºŒã€åŸºæœ¬ä½¿ç”¨æ–¹å¼"><span>äºŒã€åŸºæœ¬ä½¿ç”¨æ–¹å¼</span></a></h2><h3 id="_1-è‡ªå®šä¹‰-service-æ¥å£-å¯é€‰" tabindex="-1"><a class="header-anchor" href="#_1-è‡ªå®šä¹‰-service-æ¥å£-å¯é€‰"><span>1. è‡ªå®šä¹‰ Service æ¥å£ï¼ˆå¯é€‰ï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token keyword">extends</span> <span class="token class-name">IService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// å¯ä»¥æ‰©å±•è‡ªå®šä¹‰æ–¹æ³•</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getActiveUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-service-å®ç°ç±»ç»§æ‰¿-serviceimpl" tabindex="-1"><a class="header-anchor" href="#_2-service-å®ç°ç±»ç»§æ‰¿-serviceimpl"><span>2. Service å®ç°ç±»ç»§æ‰¿ <code>ServiceImpl</code></span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Service</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserMapper</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getActiveUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getStatus</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ğŸ”¸ æ³›å‹ <code>&lt;UserMapper, User&gt;</code>ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªï¼šä½ çš„ Mapper æ¥å£</li><li>ç¬¬äºŒä¸ªï¼šå®ä½“ç±»</li></ul></blockquote><hr><h2 id="ä¸‰ã€iservice-æä¾›çš„æ ¸å¿ƒèƒ½åŠ›-å¸¸ç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€iservice-æä¾›çš„æ ¸å¿ƒèƒ½åŠ›-å¸¸ç”¨æ–¹æ³•"><span>ä¸‰ã€IService æä¾›çš„æ ¸å¿ƒèƒ½åŠ›ï¼ˆå¸¸ç”¨æ–¹æ³•ï¼‰</span></a></h2><h3 id="âœ…-1-åŸºç¡€-crud-æ¯”-mapper-æ›´è¯­ä¹‰åŒ–" tabindex="-1"><a class="header-anchor" href="#âœ…-1-åŸºç¡€-crud-æ¯”-mapper-æ›´è¯­ä¹‰åŒ–"><span>âœ… 1. åŸºç¡€ CRUDï¼ˆæ¯” Mapper æ›´è¯­ä¹‰åŒ–ï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// æ’å…¥</span></span>
<span class="line"><span class="token keyword">boolean</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">User</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// å•æ¡</span></span>
<span class="line"><span class="token keyword">boolean</span> <span class="token function">saveBatch</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰¹é‡ï¼ˆé»˜è®¤ 1000 æ¡ä¸€æ‰¹ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åˆ é™¤</span></span>
<span class="line"><span class="token keyword">boolean</span> <span class="token function">removeById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">boolean</span> <span class="token function">removeByMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// æŒ‰å­—æ®µå€¼åˆ é™¤</span></span>
<span class="line"><span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æŸ¥è¯¢</span></span>
<span class="line"><span class="token class-name">User</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// æŸ¥å…¨éƒ¨</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ›´æ–°</span></span>
<span class="line"><span class="token keyword">boolean</span> <span class="token function">updateById</span><span class="token punctuation">(</span><span class="token class-name">User</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">boolean</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">User</span> entity<span class="token punctuation">,</span> <span class="token class-name">Wrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> updateWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="âœ…-2-åˆ†é¡µæŸ¥è¯¢-ç›´æ¥è¿”å›-ipage" tabindex="-1"><a class="header-anchor" href="#âœ…-2-åˆ†é¡µæŸ¥è¯¢-ç›´æ¥è¿”å›-ipage"><span>âœ… 2. åˆ†é¡µæŸ¥è¯¢ï¼ˆç›´æ¥è¿”å› IPageï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> </span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ge</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="âœ…-3-é“¾å¼æŸ¥è¯¢-querychain-updatechain" tabindex="-1"><a class="header-anchor" href="#âœ…-3-é“¾å¼æŸ¥è¯¢-querychain-updatechain"><span>âœ… 3. é“¾å¼æŸ¥è¯¢ï¼ˆQueryChain / UpdateChainï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// é“¾å¼æŸ¥è¯¢</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">likeRight</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">,</span> <span class="token string">&quot;å¼ &quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">ge</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// é“¾å¼æ›´æ–°</span></span>
<span class="line"><span class="token keyword">boolean</span> updated <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getStatus</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ğŸ”¸ é“¾å¼æ“ä½œåº•å±‚ä»ç”¨ Wrapperï¼Œä½†è¯­æ³•æ›´æµç•…ã€‚</p></blockquote><h3 id="âœ…-4-æ‰¹é‡æ“ä½œä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#âœ…-4-æ‰¹é‡æ“ä½œä¼˜åŒ–"><span>âœ… 4. æ‰¹é‡æ“ä½œä¼˜åŒ–</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// æ‰¹é‡æ’å…¥ï¼ˆè‡ªåŠ¨åˆ†æ‰¹ï¼Œé¿å… OOMï¼‰</span></span>
<span class="line">userService<span class="token punctuation">.</span><span class="token function">saveBatch</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¯æ‰¹ 1000 æ¡</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ‰¹é‡æ›´æ–°ï¼ˆéœ€è‡ªå·±å®ç°ï¼ŒIService ä¸ç›´æ¥æä¾›ï¼Œä½†å¯é€šè¿‡ update + å¾ªç¯ï¼‰</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="âœ…-5-è·å–å•ä¸ªå­—æ®µ-é¿å…æŸ¥å…¨è¡¨" tabindex="-1"><a class="header-anchor" href="#âœ…-5-è·å–å•ä¸ªå­—æ®µ-é¿å…æŸ¥å…¨è¡¨"><span>âœ… 5. è·å–å•ä¸ªå­—æ®µï¼ˆé¿å…æŸ¥å…¨è¡¨ï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// SELECT name FROM user WHERE id = 1</span></span>
<span class="line"><span class="token class-name">String</span> name <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getOne</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token boolean">false</span> <span class="token comment">// æ˜¯å¦æŠ›å¼‚å¸¸ï¼ˆfalse è¡¨ç¤ºä¸æŠ›ï¼Œè¿”å› nullï¼‰</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="å››ã€ä¸-basemapper-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#å››ã€ä¸-basemapper-çš„åŒºåˆ«"><span>å››ã€ä¸ BaseMapper çš„åŒºåˆ«</span></a></h2><table><thead><tr><th>èƒ½åŠ›</th><th><code>BaseMapper</code></th><th><code>IService</code></th></tr></thead><tbody><tr><td>æ‰¹é‡æ’å…¥</td><td>âŒï¼ˆéœ€è‡ªå·±å†™ foreach XMLï¼‰</td><td>âœ… <code>saveBatch()</code>ï¼ˆå¸¦åˆ†æ‰¹ï¼‰</td></tr><tr><td>é“¾å¼è°ƒç”¨</td><td>âŒ</td><td>âœ… <code>query().eq().list()</code></td></tr><tr><td>Service å±‚è¯­ä¹‰</td><td>âŒï¼ˆå±äº DAOï¼‰</td><td>âœ…ï¼ˆå¤©ç„¶åœ¨ Service å±‚ï¼‰</td></tr><tr><td>äº‹åŠ¡æ§åˆ¶</td><td>éœ€æ‰‹åŠ¨åŠ  <code>@Transactional</code></td><td>æ–¹æ³•å†…å¯ç»„åˆå¤šä¸ªæ“ä½œï¼Œé…åˆ <code>@Transactional</code> æ›´å®‰å…¨</td></tr><tr><td>è¿”å›å€¼å°è£…</td><td>åŸºç¡€ç±»å‹</td><td>æ›´é«˜å±‚ï¼ˆå¦‚ç›´æ¥è¿”å› Entity/List/IPageï¼‰</td></tr></tbody></table><blockquote><p>ğŸ’¡ <strong>æœ€ä½³å®è·µ</strong>ï¼š</p><ul><li>ç®€å•å•è¡¨æ“ä½œ â†’ ç›´æ¥ç”¨ <code>IService</code></li><li>å¤æ‚ SQLï¼ˆJOIN/å­æŸ¥è¯¢ï¼‰â†’ åœ¨ Mapper å†™ XMLï¼ŒService è°ƒç”¨ Mapper</li></ul></blockquote><hr><h2 id="äº”ã€æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#äº”ã€æ³¨æ„äº‹é¡¹"><span>äº”ã€æ³¨æ„äº‹é¡¹</span></a></h2><h3 id="_1-æ‰¹é‡æ“ä½œæ€§èƒ½" tabindex="-1"><a class="header-anchor" href="#_1-æ‰¹é‡æ“ä½œæ€§èƒ½"><span>1. æ‰¹é‡æ“ä½œæ€§èƒ½</span></a></h3><ul><li><code>saveBatch()</code> é»˜è®¤æ¯ 1000 æ¡æäº¤ä¸€æ¬¡ï¼Œé¿å…å¤§äº‹åŠ¡ã€‚</li><li>åº•å±‚ä½¿ç”¨ <code>ExecutorType.BATCH</code>ï¼ˆMyBatis æ‰¹å¤„ç†æ¨¡å¼ï¼‰ã€‚</li></ul><h3 id="_2-äº‹åŠ¡ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_2-äº‹åŠ¡ç®¡ç†"><span>2. äº‹åŠ¡ç®¡ç†</span></a></h3><p><code>IService</code> çš„æ–¹æ³•<strong>æœ¬èº«ä¸å¸¦äº‹åŠ¡</strong>ï¼Œéœ€åœ¨ Service æ–¹æ³•ä¸ŠåŠ  <code>@Transactional</code>ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Transactional</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">Long</span> fromId<span class="token punctuation">,</span> <span class="token class-name">Long</span> toId<span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>fromId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setBalance</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>toId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setBalance</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-ä¸è¦æ»¥ç”¨" tabindex="-1"><a class="header-anchor" href="#_3-ä¸è¦æ»¥ç”¨"><span>3. ä¸è¦æ»¥ç”¨</span></a></h3><ul><li>å¤šè¡¨å…³è”ã€å¤æ‚èšåˆã€æŠ¥è¡¨ç±»æŸ¥è¯¢ â†’ <strong>ä»åº”ä½¿ç”¨è‡ªå®šä¹‰ Mapper + XML</strong></li><li><code>IService</code> é€‚åˆ<strong>å•è¡¨ä¸šåŠ¡é€»è¾‘</strong></li></ul><hr><h2 id="å…­ã€å…¸å‹åœºæ™¯ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å…­ã€å…¸å‹åœºæ™¯ç¤ºä¾‹"><span>å…­ã€å…¸å‹åœºæ™¯ç¤ºä¾‹</span></a></h2><h3 id="åœºæ™¯-æ‰¹é‡ç¦ç”¨ä½é¾„ç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#åœºæ™¯-æ‰¹é‡ç¦ç”¨ä½é¾„ç”¨æˆ·"><span>åœºæ™¯ï¼šæ‰¹é‡ç¦ç”¨ä½é¾„ç”¨æˆ·</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Service</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserMapper</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Transactional</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">disableMinors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// å…ˆæŸ¥å‡ºæ‰€æœ‰ age &lt; 18 çš„ç”¨æˆ· ID</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listObjs</span><span class="token punctuation">(</span></span>
<span class="line">            <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getId</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ids<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// æ‰¹é‡æ›´æ–°çŠ¶æ€</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span></span>
<span class="line">                <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token keyword">new</span> <span class="token class-name">LambdaUpdateWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">,</span> ids<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="âœ…-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#âœ…-æ€»ç»“"><span>âœ… æ€»ç»“</span></a></h2><table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å®šä½</strong></td><td>MyBatis-Plus çš„é€šç”¨ Service å±‚å°è£…</td></tr><tr><td><strong>ä¼˜åŠ¿</strong></td><td>å‡å°‘æ ·æ¿ä»£ç ã€æ”¯æŒæ‰¹é‡ã€é“¾å¼è°ƒç”¨ã€åˆ†é¡µä¸€ä½“åŒ–</td></tr><tr><td><strong>é€‚ç”¨</strong></td><td>å•è¡¨ CRUDã€ç®€å•æ¡ä»¶æ“ä½œ</td></tr><tr><td><strong>ä¸é€‚ç”¨</strong></td><td>å¤šè¡¨ JOINã€å¤æ‚ SQLã€å­˜å‚¨è¿‡ç¨‹</td></tr><tr><td><strong>æ­é…</strong></td><td>ç»§æ‰¿ <code>ServiceImpl&lt;M, T&gt;</code> + å®ç°è‡ªå®šä¹‰æ¥å£</td></tr></tbody></table><blockquote><p>ğŸ“Œ <strong>è®°ä½</strong>ï¼š <strong>â€œMapper å†™å¤æ‚ SQLï¼ŒService ç”¨ IService åšå•è¡¨é€»è¾‘â€</strong> â€”â€” è¿™æ˜¯ MP æœ€é«˜æ•ˆçš„ä½¿ç”¨å§¿åŠ¿ã€‚</p></blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://baomidou.com/pages/49cc81/</p>`,47)])])}const i=s(t,[["render",c]]),u=JSON.parse('{"path":"/docs/heimashangcheng/MybatisPlus/5.IService.html","title":"IService","lang":"en-US","frontmatter":{"title":"IService","date":"2026-1-29"},"headers":[{"level":2,"title":"ä¸€ã€æ ¸å¿ƒå®šä½","slug":"ä¸€ã€æ ¸å¿ƒå®šä½","link":"#ä¸€ã€æ ¸å¿ƒå®šä½","children":[]},{"level":2,"title":"äºŒã€åŸºæœ¬ä½¿ç”¨æ–¹å¼","slug":"äºŒã€åŸºæœ¬ä½¿ç”¨æ–¹å¼","link":"#äºŒã€åŸºæœ¬ä½¿ç”¨æ–¹å¼","children":[{"level":3,"title":"1. è‡ªå®šä¹‰ Service æ¥å£ï¼ˆå¯é€‰ï¼‰","slug":"_1-è‡ªå®šä¹‰-service-æ¥å£-å¯é€‰","link":"#_1-è‡ªå®šä¹‰-service-æ¥å£-å¯é€‰","children":[]},{"level":3,"title":"2. Service å®ç°ç±»ç»§æ‰¿ ServiceImpl","slug":"_2-service-å®ç°ç±»ç»§æ‰¿-serviceimpl","link":"#_2-service-å®ç°ç±»ç»§æ‰¿-serviceimpl","children":[]}]},{"level":2,"title":"ä¸‰ã€IService æä¾›çš„æ ¸å¿ƒèƒ½åŠ›ï¼ˆå¸¸ç”¨æ–¹æ³•ï¼‰","slug":"ä¸‰ã€iservice-æä¾›çš„æ ¸å¿ƒèƒ½åŠ›-å¸¸ç”¨æ–¹æ³•","link":"#ä¸‰ã€iservice-æä¾›çš„æ ¸å¿ƒèƒ½åŠ›-å¸¸ç”¨æ–¹æ³•","children":[{"level":3,"title":"âœ… 1. åŸºç¡€ CRUDï¼ˆæ¯” Mapper æ›´è¯­ä¹‰åŒ–ï¼‰","slug":"âœ…-1-åŸºç¡€-crud-æ¯”-mapper-æ›´è¯­ä¹‰åŒ–","link":"#âœ…-1-åŸºç¡€-crud-æ¯”-mapper-æ›´è¯­ä¹‰åŒ–","children":[]},{"level":3,"title":"âœ… 2. åˆ†é¡µæŸ¥è¯¢ï¼ˆç›´æ¥è¿”å› IPageï¼‰","slug":"âœ…-2-åˆ†é¡µæŸ¥è¯¢-ç›´æ¥è¿”å›-ipage","link":"#âœ…-2-åˆ†é¡µæŸ¥è¯¢-ç›´æ¥è¿”å›-ipage","children":[]},{"level":3,"title":"âœ… 3. é“¾å¼æŸ¥è¯¢ï¼ˆQueryChain / UpdateChainï¼‰","slug":"âœ…-3-é“¾å¼æŸ¥è¯¢-querychain-updatechain","link":"#âœ…-3-é“¾å¼æŸ¥è¯¢-querychain-updatechain","children":[]},{"level":3,"title":"âœ… 4. æ‰¹é‡æ“ä½œä¼˜åŒ–","slug":"âœ…-4-æ‰¹é‡æ“ä½œä¼˜åŒ–","link":"#âœ…-4-æ‰¹é‡æ“ä½œä¼˜åŒ–","children":[]},{"level":3,"title":"âœ… 5. è·å–å•ä¸ªå­—æ®µï¼ˆé¿å…æŸ¥å…¨è¡¨ï¼‰","slug":"âœ…-5-è·å–å•ä¸ªå­—æ®µ-é¿å…æŸ¥å…¨è¡¨","link":"#âœ…-5-è·å–å•ä¸ªå­—æ®µ-é¿å…æŸ¥å…¨è¡¨","children":[]}]},{"level":2,"title":"å››ã€ä¸ BaseMapper çš„åŒºåˆ«","slug":"å››ã€ä¸-basemapper-çš„åŒºåˆ«","link":"#å››ã€ä¸-basemapper-çš„åŒºåˆ«","children":[]},{"level":2,"title":"äº”ã€æ³¨æ„äº‹é¡¹","slug":"äº”ã€æ³¨æ„äº‹é¡¹","link":"#äº”ã€æ³¨æ„äº‹é¡¹","children":[{"level":3,"title":"1. æ‰¹é‡æ“ä½œæ€§èƒ½","slug":"_1-æ‰¹é‡æ“ä½œæ€§èƒ½","link":"#_1-æ‰¹é‡æ“ä½œæ€§èƒ½","children":[]},{"level":3,"title":"2. äº‹åŠ¡ç®¡ç†","slug":"_2-äº‹åŠ¡ç®¡ç†","link":"#_2-äº‹åŠ¡ç®¡ç†","children":[]},{"level":3,"title":"3. ä¸è¦æ»¥ç”¨","slug":"_3-ä¸è¦æ»¥ç”¨","link":"#_3-ä¸è¦æ»¥ç”¨","children":[]}]},{"level":2,"title":"å…­ã€å…¸å‹åœºæ™¯ç¤ºä¾‹","slug":"å…­ã€å…¸å‹åœºæ™¯ç¤ºä¾‹","link":"#å…­ã€å…¸å‹åœºæ™¯ç¤ºä¾‹","children":[{"level":3,"title":"åœºæ™¯ï¼šæ‰¹é‡ç¦ç”¨ä½é¾„ç”¨æˆ·","slug":"åœºæ™¯-æ‰¹é‡ç¦ç”¨ä½é¾„ç”¨æˆ·","link":"#åœºæ™¯-æ‰¹é‡ç¦ç”¨ä½é¾„ç”¨æˆ·","children":[]}]},{"level":2,"title":"âœ… æ€»ç»“","slug":"âœ…-æ€»ç»“","link":"#âœ…-æ€»ç»“","children":[]}],"git":{"createdTime":1771237270000,"updatedTime":1771237270000,"contributors":[{"name":"SaltFishGC","email":"130335482+SaltFishGC@users.noreply.github.com","commits":1}]},"filePathRelative":"docs/é»‘é©¬å•†åŸ/MybatisPlus/5.IService.md"}');export{i as comp,u as data};
