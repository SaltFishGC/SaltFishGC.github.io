---
title: Dockerç®€ä»‹
date: 2026-1-29
---

## ç®€å•æ¦‚å¿µ

Docker æ˜¯ä¸€ä¸ªå¼€æºçš„**å®¹å™¨åŒ–å¹³å°**ï¼Œç”¨äºå°†åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–ï¼ˆå¦‚ä»£ç ã€è¿è¡Œæ—¶ã€åº“ã€é…ç½®æ–‡ä»¶ç­‰ï¼‰æ‰“åŒ…æˆä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„**å®¹å™¨ï¼ˆContainerï¼‰**ï¼Œå®ç°â€œä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œâ€ã€‚

------

### æ ¸å¿ƒç‰¹ç‚¹ï¼š

- **è½»é‡çº§**ï¼šå®¹å™¨å…±äº«ä¸»æœºæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œæ— éœ€åƒè™šæ‹Ÿæœºé‚£æ ·å¯åŠ¨å®Œæ•´æ“ä½œç³»ç»Ÿï¼Œå¯åŠ¨å¿«ã€èµ„æºå ç”¨å°‘ã€‚
- **éš”ç¦»æ€§**ï¼šæ¯ä¸ªå®¹å™¨ç›¸äº’éš”ç¦»ï¼Œäº’ä¸å½±å“ã€‚
- **å¯ç§»æ¤æ€§**ï¼šé•œåƒå¯åœ¨ä»»ä½•æ”¯æŒ Docker çš„ç¯å¢ƒï¼ˆLinuxã€Windowsã€macOSã€äº‘æœåŠ¡å™¨ï¼‰ä¸­è¿è¡Œã€‚
- **æ ‡å‡†åŒ–**ï¼šé€šè¿‡ `Dockerfile` å®šä¹‰æ„å»ºè¿‡ç¨‹ï¼Œç¡®ä¿å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒä¸€è‡´ã€‚

------

### æ ¸å¿ƒæ¦‚å¿µï¼š

| æ¦‚å¿µ                  | è¯´æ˜                                                         |
| --------------------- | ------------------------------------------------------------ |
| **é•œåƒï¼ˆImageï¼‰**     | åªè¯»æ¨¡æ¿ï¼Œç”¨äºåˆ›å»ºå®¹å™¨ï¼ˆå¦‚ `nginx:latest`ï¼‰                  |
| **å®¹å™¨ï¼ˆContainerï¼‰** | é•œåƒçš„è¿è¡Œå®ä¾‹ï¼Œå¯å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ï¼ˆä¸€ä¸ªé•œåƒå¯è¿è¡Œå¤šä¸ªå®¹å™¨ï¼‰ |
| **Dockerfile**        | æ–‡æœ¬æ–‡ä»¶ï¼Œå®šä¹‰å¦‚ä½•æ„å»ºé•œåƒ                                   |
| **ä»“åº“ï¼ˆRegistryï¼‰**  | å­˜å‚¨å’Œåˆ†å‘é•œåƒçš„åœ°æ–¹ï¼ˆå¦‚ Docker Hubã€é˜¿é‡Œäº‘ ACRï¼‰            |

------

### ç®€å•ç¤ºä¾‹ï¼š

```bash
# æ‹‰å– Nginx é•œåƒ
docker pull nginx

# è¿è¡Œå®¹å™¨ï¼ˆåå°ï¼Œç«¯å£æ˜ å°„ï¼‰
docker run -d -p 8080:80 --name my-web nginx

# è®¿é—® http://localhost:8080 å³å¯çœ‹åˆ° Nginx æ¬¢è¿é¡µ
```

------

âœ… **ä¸€å¥è¯æ€»ç»“**ï¼š
**Docker è®©åº”ç”¨åƒé›†è£…ç®±ä¸€æ ·æ ‡å‡†åŒ–æ‰“åŒ…ã€é«˜æ•ˆè¿è¾“ã€éšå¤„éƒ¨ç½²ã€‚**







## å®‰è£…ä¸é…ç½®

å®‰è£…ï¼š[Docker å®‰è£…æŒ‡å— - å„å¹³å° Docker å®‰è£…æ•™ç¨‹ | Docker ä¸­æ–‡æ–‡æ¡£](https://dockerdocs.xuanyuan.me/install)

### ä¸€é”®è„šæœ¬

åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä¸€é”®å®‰è£…è„šæœ¬å‘½ä»¤å®‰è£…docker

```bash
sudo curl -fsSL https://github.com/tech-shrimp/docker_installer/releases/download/latest/linux.sh| bash -s docker --mirror Aliyun
```

å¤‡ç”¨å®‰è£…å‘½ä»¤ï¼š

```bash
sudo curl -fsSL https://gitee.com/tech-shrimp/docker_installer/releases/download/latest/linux.sh| bash -s docker --mirror Aliyun
```

åœ¨ç»ˆç«¯æ‰§è¡Œ ä¸€è¡Œå‘½ä»¤ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶

```bash
 sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://docker.m.daocloud.io",
                       "https://docker.1panel.live",
                       "https://hub.rat.dev"
                       ]
}
EOF
```

ç„¶åé‡æ–°å¯åŠ¨dockeræœåŠ¡ï¼š

```bash
sudo systemctl restart docker
```

### yumä¸‹è½½

> åˆ é™¤æ—§ç‰ˆï¼š
>
> ```bash
> yum remove docker \
>     docker-client \
>     docker-client-latest \
>     docker-common \
>     docker-latest \
>     docker-latest-logrotate \
>     docker-logrotate \
>     docker-engine \
>     docker-selinux 
> ```

 1. æ›´æ–°åŒ…ç®¡ç†å·¥å…·

```bash
sudo yum -y update
```

 2. æ·»åŠ é˜¿é‡Œäº‘æº

ç”±äºç½‘ç»œåŸå› ï¼Œå»ºè®®æ·»åŠ å›½å†…é•œåƒæºä»¥åŠ å¿«å®‰è£…é€Ÿåº¦ï¼š

```bash
sudo wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
```

 3. å®‰è£… Docker

```bash
sudo yum -y install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

 4. å¯åŠ¨å¹¶è®¾ç½®è‡ªåŠ¨å¯åŠ¨

```bash
sudo systemctl start docker
sudo systemctl enable docker
```

### é…ç½®é•œåƒåŠ é€Ÿ

dockerä¸€èˆ¬è¢«å¢™äº†ï¼Œè¦é…ç½®ä¸€ä¸‹å‡ ä¸ªé•œåƒæºåŠ é€Ÿä¸€ä¸‹ï¼š[1æœˆ30æ—¥æ›´æ–° | 2026 æœ€æ–°å¯ç”¨ Docker å›½å†…é•œåƒæºåŠ é€Ÿåˆ—è¡¨-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘](https://cloud.tencent.com/developer/article/2485043)

```bash
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<EOF
{
    "registry-mirrors": [
        "https://docker.xuanyuan.me",
        "http://hub-mirror.c.163.com",
        "https://mirrors.tuna.tsinghua.edu.cn",
        "http://mirrors.sohu.com",
        "https://ustc-edu-cn.mirror.aliyuncs.com",
        "https://ccr.ccs.tencentyun.com",
        "https://docker.m.daocloud.io",
        "https://docker.awsl9527.cn"
    ]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```

| æä¾›å•†     | é•œåƒåœ°å€                               | å¤‡æ³¨                         |
| :--------- | :------------------------------------- | :--------------------------- |
| **é˜¿é‡Œäº‘** | `https://<ä½ çš„ID>.mirror.aliyuncs.com` | â­ æœ€ç¨³å®šï¼Œéœ€ç™»å½•è·å–ä¸“å±åœ°å€ |
| **è…¾è®¯äº‘** | `https://mirror.ccs.tencentyun.com`    | æ— éœ€ç™»å½•ï¼Œç›´æ¥å¯ç”¨           |
| **ä¸­ç§‘å¤§** | `https://docker.mirrors.ustc.edu.cn`   | å…¬å…±é•œåƒï¼Œå…è´¹               |
| **ç½‘æ˜“**   | `https://hub-mirror.c.163.com`         | ç®€å•å¥½ç”¨                     |

> ğŸ’¡ **é˜¿é‡Œäº‘è·å–ä¸“å±åœ°å€æ–¹æ³•**ï¼š
>
> 1. ç™»å½• [é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡æ§åˆ¶å°](https://cr.console.aliyun.com/)
> 2. å·¦ä¾§èœå• â†’ **é•œåƒå·¥å…·** â†’ **é•œåƒåŠ é€Ÿå™¨**
> 3. å¤åˆ¶ä½ çš„ä¸“å±åœ°å€ï¼ˆæ ¼å¼å¦‚ `https://xxxxxx.mirror.aliyuncs.com`ï¼‰









## åŸºç¡€æ“ä½œ

### å¯åŠ¨ä¸éªŒè¯ Docker æœåŠ¡

åœ¨ä½¿ç”¨ Docker å‰ï¼Œéœ€ç¡®ä¿å…¶åå°æœåŠ¡ï¼ˆ`dockerd`ï¼‰æ­£åœ¨è¿è¡Œã€‚  

- Linuxï¼ˆsystemd ç³»ç»Ÿï¼‰ï¼š

  ```bash
  # å¯åŠ¨ Docker æœåŠ¡
  sudo systemctl start docker
  
  # è®¾ç½®å¼€æœºè‡ªå¯
  sudo systemctl enable docker
  
  # æŸ¥çœ‹çŠ¶æ€
  sudo systemctl status docker
  ```

- **Windows/macOS**ï¼šå®‰è£… Docker Desktop åï¼Œå¯åŠ¨åº”ç”¨ç¨‹åºå³å¯è‡ªåŠ¨è¿è¡ŒæœåŠ¡ã€‚

éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š

```bash
docker --version        # æŸ¥çœ‹ç‰ˆæœ¬
docker info             # æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
docker run hello-world  # è¿è¡Œæµ‹è¯•å®¹å™¨
```

------

### é•œåƒï¼ˆImageï¼‰æ“ä½œ

é•œåƒæ˜¯å®¹å™¨çš„æ¨¡æ¿ï¼Œåªè¯»ä¸”å¯å…±äº«ã€‚

é•œåƒåç§°ï¼š`Repository:Version` é•œåƒåç§° + ç‰ˆæœ¬å·

#### æ‹‰å–é•œåƒ

```bash
docker pull nginx:latest    # ä» Docker Hub æ‹‰å–å®˜æ–¹ Nginx é•œåƒ
docker pull ubuntu:22.04    # æŒ‡å®šæ ‡ç­¾
```

#### åˆ—å‡ºæœ¬åœ°é•œåƒ

```bash
docker images               # æ˜¾ç¤ºæ‰€æœ‰æœ¬åœ°é•œåƒ
docker image ls             # ç­‰ä»·å‘½ä»¤
```

è¾“å‡ºåŒ…å«ï¼š`REPOSITORY`ã€`TAG`ã€`IMAGE ID`ã€`CREATED`ã€`SIZE`ã€‚

#### åˆ é™¤é•œåƒ

```bash
docker rmi nginx            # åˆ é™¤é•œåƒï¼ˆé€šè¿‡åç§°æˆ– IDï¼‰
docker rmi <IMAGE_ID>       # å¼ºåˆ¶åˆ é™¤ï¼ˆå³ä½¿è¢«å®¹å™¨å¼•ç”¨ï¼‰åŠ  -f
```

#### æ„å»ºè‡ªå®šä¹‰é•œåƒï¼ˆDockerfileï¼‰

```bash
# åœ¨åŒ…å« Dockerfile çš„ç›®å½•ä¸‹æ‰§è¡Œ
docker build -t myapp:v1 .
```

- `-t`ï¼šæŒ‡å®šé•œåƒåå’Œæ ‡ç­¾
- `.`ï¼šæ„å»ºä¸Šä¸‹æ–‡è·¯å¾„

#### è½½å…¥taræ–‡ä»¶

```bash
docker load < archive.tar
# æˆ–
docker load -i archive.tar
```

- `-i`ï¼šæŒ‡å®šè¾“å…¥çš„å½’æ¡£æ–‡ä»¶è·¯å¾„ï¼ˆæ¨èæ˜¾å¼ä½¿ç”¨ï¼Œæ›´æ¸…æ™°ï¼‰

#### ä¿å­˜æœ¬åœ°é•œåƒä¸ºtar

```bash
docker save -o nginx.tar nginx:latest
```

------

### å®¹å™¨ï¼ˆContainerï¼‰æ“ä½œ

å®¹å™¨æ˜¯é•œåƒçš„è¿è¡Œå®ä¾‹ï¼Œæœ‰ç”Ÿå‘½å‘¨æœŸï¼ˆåˆ›å»º â†’ è¿è¡Œ â†’ åœæ­¢ â†’ åˆ é™¤ï¼‰ã€‚

#### è¿è¡Œå®¹å™¨

```bash
# åå°è¿è¡Œï¼ˆ-dï¼‰ï¼Œç«¯å£æ˜ å°„ï¼ˆ-pï¼‰ï¼Œå‘½åï¼ˆ--nameï¼‰
docker run -d -p 8080:80 --name my-nginx nginx

# äº¤äº’å¼è¿è¡Œï¼ˆ-itï¼‰ï¼Œè¿›å…¥å®¹å™¨ shell
docker run -it ubuntu /bin/bash

# è‡ªåŠ¨åˆ é™¤å®¹å™¨ï¼ˆ--rmï¼‰ï¼Œå¸¸ç”¨äºä¸´æ—¶ä»»åŠ¡
docker run --rm alpine ping -c 3 baidu.com
```

#### æŸ¥çœ‹å®¹å™¨

```bash
docker ps          # æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨
docker ps -a       # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰
docker container ls -a  # ç­‰ä»·å‘½ä»¤
```

#### åœæ­¢ä¸å¯åŠ¨

```bash
docker stop my-nginx    # ä¼˜é›…åœæ­¢ï¼ˆå‘é€ SIGTERMï¼‰
docker kill my-nginx    # å¼ºåˆ¶ç»ˆæ­¢ï¼ˆå‘é€ SIGKILLï¼‰

docker start my-nginx   # å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨
docker restart my-nginx # é‡å¯å®¹å™¨
```

> å…³æœºådockerä¼šæœ‰åºstopæ‰€æœ‰æ­£åœ¨runçš„å®¹å™¨ï¼Œå¦‚æƒ³è¦å®¹å™¨åœ¨å¼€æœºåè‡ªåŠ¨é‡å¯ï¼Œåˆ™ä½¿ç”¨å‘½ä»¤ï¼š
>
> ```bash
> docker update --restart=unless-stopped mysql
> ```

#### è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨

```bash
# æ‰§è¡Œå‘½ä»¤ï¼ˆæ¨èï¼‰
docker exec -it my-nginx /bin/bash

# é™„åŠ åˆ°å®¹å™¨ä¸»è¿›ç¨‹ï¼ˆä¸æ¨èï¼Œé€€å‡ºå¯èƒ½ç»ˆæ­¢å®¹å™¨ï¼‰
docker attach my-nginx
```

#### æŸ¥çœ‹æ—¥å¿—

```bash
docker logs my-nginx        # æŸ¥çœ‹å…¨éƒ¨æ—¥å¿—
docker logs -f my-nginx     # å®æ—¶è·Ÿè¸ªæ—¥å¿—ï¼ˆç±»ä¼¼ tail -fï¼‰
docker logs --tail 50 my-nginx  # æŸ¥çœ‹æœ€å 50 è¡Œ
```

#### åˆ é™¤å®¹å™¨

```bash
docker rm my-nginx          # åˆ é™¤å·²åœæ­¢çš„å®¹å™¨
docker rm -f my-nginx       # å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨
docker container prune      # åˆ é™¤æ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨
```

------

### è¿è¡Œå®¹å™¨å‘½ä»¤è¯¦è§£

æˆ‘ä»¬ä»¥ **å¯åŠ¨ä¸€ä¸ªå¸¦è‡ªå®šä¹‰é…ç½®çš„ Nginx å®¹å™¨** ä¸ºä¾‹ï¼Œé€æ­¥æ‹†è§£ `docker run` çš„æ ¸å¿ƒå‚æ•°ï¼š

```bash
docker run -d \
  --name my-nginx \
  --restart unless-stopped \
  -p 8080:80 \
  -v /host/nginx.conf:/etc/nginx/nginx.conf:ro \
  -v nginx-logs:/var/log/nginx \
  --network my-web-net \
  --memory=256m \
  --cpus=0.5 \
  nginx:1.25
```

ä¸‹é¢é€è¡Œè¯¦ç»†è§£é‡Šæ¯ä¸ªå‚æ•°çš„ä½œç”¨ã€åŸç†å’Œæœ€ä½³å®è·µã€‚

------

#### `-d`ï¼šåå°è¿è¡Œï¼ˆDetached Modeï¼‰

- **ä½œç”¨**ï¼šå®¹å™¨åœ¨åå°è¿è¡Œï¼Œä¸å ç”¨å½“å‰ç»ˆç«¯ã€‚

- å¯¹æ¯”ï¼š

  - ä¸åŠ  `-d`ï¼šå®¹å™¨å‰å°è¿è¡Œï¼Œå…³é—­ç»ˆç«¯å³åœæ­¢å®¹å™¨ï¼ˆé€‚åˆè°ƒè¯•ï¼‰ã€‚
  - åŠ  `- d`ï¼šå®¹å™¨ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼ˆé€‚åˆæœåŠ¡éƒ¨ç½²ï¼‰ã€‚
  
- **ç­‰ä»·å†™æ³•**ï¼š`--detach`

- âœ… **ç”Ÿäº§ç¯å¢ƒå¿…åŠ **

------

#### `--name my-nginx`ï¼šæŒ‡å®šå®¹å™¨åç§°

- **ä½œç”¨**ï¼šä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ª**æ˜“è¯»ã€å”¯ä¸€çš„åç§°**ï¼ˆé»˜è®¤æ˜¯éšæœºå­—ç¬¦ä¸²å¦‚ `happy_pasteur`ï¼‰ã€‚

- ä¼˜åŠ¿ï¼š

  - åç»­æ“ä½œæ›´ç›´è§‚ï¼š`docker stop my-nginx` è€Œé `docker stop a1b2c3d4`
  - å®¹å™¨é—´å¯é€šè¿‡åç§°é€šä¿¡ï¼ˆåœ¨è‡ªå®šä¹‰ç½‘ç»œä¸­ï¼‰
  
- âš ï¸ **æ³¨æ„**ï¼šåç§°å¿…é¡»å…¨å±€å”¯ä¸€ï¼Œé‡å¤ä¼šæŠ¥é”™ã€‚

------

#### `--restart unless-stopped`ï¼šé‡å¯ç­–ç•¥

- **ä½œç”¨**ï¼šå®šä¹‰å®¹å™¨é€€å‡ºåçš„è‡ªåŠ¨é‡å¯è¡Œä¸ºã€‚

- å¸¸ç”¨é€‰é¡¹ï¼š

  | ç­–ç•¥                       | è¡Œä¸º                                        |
  | -------------------------- | ------------------------------------------- |
  | `no`ï¼ˆé»˜è®¤ï¼‰               | ä¸è‡ªåŠ¨é‡å¯                                  |
  | `always`                   | æ€»æ˜¯é‡å¯ï¼ˆå³ä½¿æ‰‹åŠ¨ `docker stop`ï¼‰          |
  | `on-failure[:max-retries]` | é0é€€å‡ºç æ—¶é‡å¯                             |
  | `unless-stopped`           | **æ¨èï¼** é™¤éè¢«æ‰‹åŠ¨åœæ­¢ï¼Œå¦åˆ™ always é‡å¯ |
  
- âœ… **ç”Ÿäº§æœåŠ¡å¼ºçƒˆå»ºè®®è®¾ç½®**ï¼Œé¿å…æœåŠ¡å™¨é‡å¯åæœåŠ¡ä¸å¯ç”¨ã€‚

------

#### `-p 8080:80`ï¼šç«¯å£æ˜ å°„ï¼ˆPublish Portsï¼‰

- **ä½œç”¨**ï¼šå°†**ä¸»æœºç«¯å£**æ˜ å°„åˆ°**å®¹å™¨ç«¯å£**ï¼Œæ ¼å¼ï¼š`-p <ä¸»æœºç«¯å£>:<å®¹å™¨ç«¯å£>`

- æœ¬ä¾‹å«ä¹‰ï¼š

  - ä¸»æœºè®¿é—® `http://localhost:8080` â†’ æµé‡è½¬å‘åˆ°å®¹å™¨çš„ `80` ç«¯å£ï¼ˆNginx é»˜è®¤ç«¯å£ï¼‰

- é«˜çº§ç”¨æ³•ï¼š

  ```bash
  -p 80:80                # ç›´æ¥ç»‘å®š 80 ç«¯å£ï¼ˆéœ€ rootï¼‰
  -p 127.0.0.1:8080:80    # ä»…æœ¬åœ°å›ç¯å¯è®¿é—®ï¼ˆå®‰å…¨ï¼‰
  -p 8080:80/udp          # æŒ‡å®šåè®®ï¼ˆTCP/UDPï¼‰
  ```
  
- âš ï¸ **æ³¨æ„**ï¼šå¤šä¸ªå®¹å™¨ä¸èƒ½ç»‘å®šåŒä¸€ä¸»æœºç«¯å£ã€‚

------

#### `-v /host/nginx.conf:/etc/nginx/nginx.conf:ro`ï¼šç»‘å®šæŒ‚è½½é…ç½®æ–‡ä»¶

- **ä½œç”¨**ï¼šå°†ä¸»æœºçš„ Nginx é…ç½®æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨å†…ï¼Œå¹¶è®¾ä¸º**åªè¯»**ã€‚

- å‚æ•°åˆ†è§£ï¼š

  - `/host/nginx.conf`ï¼šä¸»æœºä¸Šçš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆ**å¿…é¡»å­˜åœ¨ï¼**ï¼‰
  - `/etc/nginx/nginx.conf`ï¼šå®¹å™¨å†…çš„ç›®æ ‡è·¯å¾„
  - `:ro`ï¼š**read-only**ï¼Œé˜²æ­¢å®¹å™¨æ„å¤–ä¿®æ”¹é…ç½®
  
- âœ… æœ€ä½³å®è·µï¼š

  - é…ç½®æ–‡ä»¶ç”¨ Bind Mountï¼ˆä¾¿äºå¤–éƒ¨ç®¡ç†ï¼‰
  - åŠ  `:ro` æå‡å®‰å…¨æ€§
  
- âš ï¸ **è‡´å‘½é™·é˜±**ï¼š
  è‹¥ä¸»æœºæ–‡ä»¶ä¸å­˜åœ¨ï¼ŒDocker ä¼šåˆ›å»ºä¸€ä¸ª**ç©ºç›®å½•**è€Œéæ–‡ä»¶ï¼Œå¯¼è‡´ Nginx å¯åŠ¨å¤±è´¥ï¼

------

#### `-v nginx-logs:/var/log/nginx`ï¼šä½¿ç”¨å‘½åå·æŒä¹…åŒ–æ—¥å¿—

- **ä½œç”¨**ï¼šå°†å®¹å™¨æ—¥å¿—ç›®å½•æŒ‚è½½åˆ° Docker ç®¡ç†çš„**å‘½åå·** `nginx-logs`ã€‚

- ä¼˜åŠ¿ï¼š

  - æ—¥å¿—æ•°æ®ä¸å®¹å™¨ç”Ÿå‘½å‘¨æœŸè§£è€¦ï¼ˆåˆ å®¹å™¨ä¸ä¸¢æ—¥å¿—ï¼‰
  - å·ç”± Docker ç®¡ç†ï¼Œè·¯å¾„ç»Ÿä¸€ï¼ˆ`/var/lib/docker/volumes/nginx-logs/_data`ï¼‰
  - å¯è¢«å…¶ä»–å®¹å™¨å…±äº«æˆ–å¤‡ä»½
  
- âœ… **å¯¹æ¯” Bind Mount**ï¼š
  Volume æ›´é€‚åˆ**ç”Ÿäº§ç¯å¢ƒæŒä¹…åŒ–æ•°æ®**ï¼ŒBind Mount æ›´é€‚åˆ**å¼€å‘æ—¶æŒ‚è½½ä»£ç **ã€‚

------

#### `--network my-web-net`ï¼šæŒ‡å®šè‡ªå®šä¹‰ç½‘ç»œ

- **ä½œç”¨**ï¼šå°†å®¹å™¨åŠ å…¥åä¸º `my-web-net` çš„ Docker ç½‘ç»œã€‚

- å‰æ

  ï¼šéœ€æå‰åˆ›å»ºç½‘ç»œï¼š

  ```bash
  docker network create my-web-net
  ```

- ä¼˜åŠ¿ï¼š

  - å®¹å™¨é—´å¯é€šè¿‡**å®¹å™¨å DNS è§£æ**é€šä¿¡ï¼ˆå¦‚ `ping my-nginx`ï¼‰
  - éš”ç¦»æ€§æ›´å¥½ï¼ˆé»˜è®¤ bridge ç½‘ç»œæ‰€æœ‰å®¹å™¨äº’é€šï¼‰
  
- âœ… **å¤šå®¹å™¨åº”ç”¨ï¼ˆå¦‚ Web + DBï¼‰å¿…é¡»ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œ**

------

#### `--memory=256m` å’Œ `--cpus=0.5`ï¼šèµ„æºé™åˆ¶

- **ä½œç”¨**ï¼šé™åˆ¶å®¹å™¨ä½¿ç”¨çš„ç³»ç»Ÿèµ„æºï¼Œé˜²æ­¢å•ä¸ªå®¹å™¨è€—å°½ä¸»æœºèµ„æºã€‚

- å‚æ•°è¯´æ˜ï¼š

  - `--memory=256m`ï¼šæœ€å¤šä½¿ç”¨ 256MB å†…å­˜ï¼ˆè¶…é™ä¼šè¢« OOM Killï¼‰
  - `--cpus=0.5`ï¼šæœ€å¤šä½¿ç”¨ 0.5 ä¸ª CPU æ ¸å¿ƒï¼ˆå³ 50% å•æ ¸æ€§èƒ½ï¼‰
  
- å•ä½æ”¯æŒï¼š

  - å†…å­˜ï¼š`b`, `k`, `m`, `g`ï¼ˆå¦‚ `512m`ï¼‰
  - CPUï¼šå°æ•°ï¼ˆ`0.5`ï¼‰æˆ–æ¯«æ ¸ï¼ˆ`500m` è¡¨ç¤º 0.5 æ ¸ï¼‰
  
- âœ… **ç”Ÿäº§ç¯å¢ƒå¿…å¤‡**ï¼Œå®ç°å¤šç§Ÿæˆ·èµ„æºéš”ç¦»ã€‚

------

#### `nginx:1.25`ï¼šé•œåƒåç§°ä¸æ ‡ç­¾

- **ä½œç”¨**ï¼šæŒ‡å®šè¦è¿è¡Œçš„é•œåƒã€‚

- æ ¼å¼ï¼š

  ```
  [ä»“åº“/][é•œåƒå][:æ ‡ç­¾]
  ```
  
  - `nginx`ï¼šDocker Hub å®˜æ–¹é•œåƒ
  - `:1.25`ï¼šæ˜ç¡®æŒ‡å®šç‰ˆæœ¬ï¼ˆ**ç¦æ­¢ç”¨ latestï¼**ï¼‰
  
- âœ… æœ€ä½³å®è·µï¼š

  - æ°¸è¿œæŒ‡å®šæ˜ç¡®æ ‡ç­¾ï¼ˆå¦‚ `1.25` è€Œé `latest`ï¼‰
- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç§æœ‰ä»“åº“é•œåƒï¼ˆå¦‚ `harbor.example.com/nginx:1.25`ï¼‰

------

#### è¡¥å……ï¼šå…¶ä»–é«˜é¢‘å‚æ•°

| å‚æ•°               | è¯´æ˜                 | ç¤ºä¾‹                                                |
| ------------------ | -------------------- | --------------------------------------------------- |
| `-e KEY=VALUE`     | è®¾ç½®ç¯å¢ƒå˜é‡         | `-e TZ=Asia/Shanghai`(æ ¹æ®é•œåƒçš„è¯´æ˜æ–‡æ¡£æŒ‡å®škvé…ç½®) |
| `--env-file .env`  | ä»æ–‡ä»¶åŠ è½½ç¯å¢ƒå˜é‡   | `--env-file ./prod.env`                             |
| `--user 1000:1000` | æŒ‡å®šå®¹å™¨å†…è¿è¡Œç”¨æˆ·   | é¿å… root æƒé™é£é™©                                  |
| `--rm`             | å®¹å™¨åœæ­¢åè‡ªåŠ¨åˆ é™¤   | é€‚åˆä¸´æ—¶ä»»åŠ¡                                        |
| `--entrypoint`     | è¦†ç›–é•œåƒé»˜è®¤å¯åŠ¨å‘½ä»¤ | `--entrypoint /bin/sh`                              |

----

### æ•°æ®ç®¡ç†ï¼šå·ï¼ˆVolumeï¼‰ä¸ç»‘å®šæŒ‚è½½ï¼ˆBind Mountï¼‰

å®¹å™¨é»˜è®¤æ˜¯ä¸´æ—¶çš„ï¼Œæ•°æ®éšå®¹å™¨åˆ é™¤è€Œä¸¢å¤±ã€‚Docker æä¾›ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼š

#### ä½¿ç”¨ Volumeï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºå‘½åå·
docker volume create my-vol

# æŒ‚è½½å·åˆ°å®¹å™¨
docker run -d -v my-vol:/app/data nginx

# æŸ¥çœ‹å·
docker volume ls
docker volume inspect my-vol

# åˆ é™¤å·
docker volume rm my-vol
docker volume prune  # æ¸…ç†æœªä½¿ç”¨çš„å·
```

#### ä½¿ç”¨ç»‘å®šæŒ‚è½½ï¼ˆBind Mountï¼‰

å°†ä¸»æœºç›®å½•ç›´æ¥æŒ‚è½½åˆ°å®¹å™¨ï¼š

```bash
docker run -d -v /host/path:/container/path nginx
# ç¤ºä¾‹ï¼šæŒ‚è½½å½“å‰ç›®å½•åˆ°å®¹å™¨
docker run -v $(pwd):/app alpine ls /app
```

> ğŸ’¡ **åŒºåˆ«**ï¼š  
>
> - **Volume**ï¼šç”± Docker ç®¡ç†ï¼Œè·¨å¹³å°å…¼å®¹æ€§å¥½ï¼Œé€‚åˆç”Ÿäº§  
> - **Bind Mount**ï¼šç›´æ¥æš´éœ²ä¸»æœºè·¯å¾„ï¼Œé€‚åˆå¼€å‘è°ƒè¯•

------

### ç½‘ç»œï¼ˆNetworkï¼‰åŸºç¡€

Docker é»˜è®¤æä¾›ä¸‰ç§ç½‘ç»œé©±åŠ¨ï¼š`bridge`ï¼ˆé»˜è®¤ï¼‰ã€`host`ã€`none`ã€‚

#### æŸ¥çœ‹ç½‘ç»œ

```bash
docker network ls
```

#### åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ

```bash
docker network create my-net
```

#### å®¹å™¨è¿æ¥åˆ°è‡ªå®šä¹‰ç½‘ç»œ

```bash
docker run -d --network my-net --name app1 nginx
docker run -it --network my-net alpine ping app1  # å¯é€šè¿‡å®¹å™¨åé€šä¿¡
```

> âœ… **ä¼˜åŠ¿**ï¼šè‡ªå®šä¹‰ç½‘ç»œæ”¯æŒ**è‡ªåŠ¨ DNS è§£æ**ï¼ˆå®¹å™¨åå³ hostnameï¼‰

#### ç«¯å£æ˜ å°„ï¼ˆ-pï¼‰

```bash
-p 8080:80        # ä¸»æœº8080 â†’ å®¹å™¨80
-p 127.0.0.1:8080:80  # ä»…ç»‘å®šæœ¬åœ°å›ç¯
```

------

### æ¸…ç†ä¸ç»´æŠ¤

é¿å…ç£ç›˜è¢«æ— ç”¨èµ„æºå æ»¡ï¼š

```bash
# åˆ é™¤æ‰€æœ‰åœæ­¢çš„å®¹å™¨
docker container prune

# åˆ é™¤æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„é•œåƒ
docker image prune -a

# åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„å·
docker volume prune

# ä¸€é”®æ¸…ç†ï¼ˆè°¨æ…ï¼ï¼‰
docker system prune -a
```

> âš ï¸ `docker system prune -a` ä¼šåˆ é™¤ï¼š
>
> - æ‰€æœ‰åœæ­¢çš„å®¹å™¨
> - æ‰€æœ‰æœªè¢«å®¹å™¨å¼•ç”¨çš„é•œåƒ
> - æ‰€æœ‰æœªä½¿ç”¨çš„ç½‘ç»œ
> - æ‰€æœ‰æœªä½¿ç”¨çš„æ„å»ºç¼“å­˜

------

### å¸¸ç”¨ç»„åˆå‘½ä»¤ç¤ºä¾‹

1. **å¿«é€Ÿå¯åŠ¨å¹¶è¿›å…¥ Ubuntu**

   ```bash
   docker run -it --rm ubuntu:22.04 bash
   ```

2. **è¿è¡Œ MySQL å¹¶æŒä¹…åŒ–æ•°æ®**

   ```bash
   docker run -d \
     --name mysql-db \
     -e MYSQL_ROOT_PASSWORD=123456 \
     -v mysql-data:/var/lib/mysql \
     -p 3306:3306 \
     mysql:8.0
   ```

3. **æŸ¥çœ‹å®¹å™¨ IP åœ°å€**

   ```bash
   docker inspect my-nginx | grep IPAddress
   # æˆ–
   docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' my-nginx
   ```

------







## æŒ‚è½½

### æŒ‚è½½ï¼ˆMountingï¼‰æ¦‚è¿°

åœ¨ Docker ä¸­ï¼Œ**æŒ‚è½½ï¼ˆMountï¼‰** æ˜¯æŒ‡å°†ä¸»æœºï¼ˆHostï¼‰ä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•ä¸å®¹å™¨ï¼ˆContainerï¼‰å†…çš„è·¯å¾„è¿›è¡Œå…³è”ï¼Œä½¿å¾—å®¹å™¨å¯ä»¥è¯»å†™è¿™äº›æ•°æ®ã€‚
Docker æä¾›ä¸‰ç§æŒ‚è½½æ–¹å¼ï¼š

- **Bind Mountsï¼ˆç»‘å®šæŒ‚è½½ï¼‰**ï¼šç›´æ¥æ˜ å°„ä¸»æœºä»»æ„è·¯å¾„ã€‚
- **Volumesï¼ˆå·ï¼‰**ï¼šç”± Docker ç®¡ç†çš„å­˜å‚¨ï¼Œä½äº Docker ä¸“å±ç›®å½•ï¼ˆå¦‚ `/var/lib/docker/volumes/`ï¼‰ã€‚
- **tmpfs Mounts**ï¼šä»…å­˜äºå†…å­˜ï¼Œå®¹å™¨åœæ­¢åè‡ªåŠ¨æ¸…é™¤ï¼ˆä»… Linux æ”¯æŒï¼‰ã€‚

> âœ… **æ ¸å¿ƒç›®çš„**ï¼šå®ç°**æ•°æ®æŒä¹…åŒ–**ã€**é…ç½®å…±äº«**ã€**å¼€å‘çƒ­æ›´æ–°**ã€‚
>
> `docker stop` â†’ `docker start`æŒ‚è½½çš„æ–‡ä»¶/ç›®å½•**è‡ªåŠ¨åŒæ­¥ä¸»æœºå½“å‰æœ€æ–°å†…å®¹**ï¼Œä¸å¿…é‡æ–°`docker rm`äº†å†`docker run`ã€‚
>
> - å¦‚æœåªæ”¹äº†æŒ‚è½½çš„ä»£ç /é…ç½® â†’ åªéœ€ `docker restart` å®¹å™¨ï¼ˆæˆ–è®©åº”ç”¨ reloadï¼‰
> - å¦‚æœæ”¹äº†é•œåƒï¼ˆå¦‚å‡çº§ Nginx ç‰ˆæœ¬ï¼‰â†’ å¿…é¡» `rm + run` æˆ–ç”¨æ»šåŠ¨æ›´æ–°

------

### ç»‘å®šæŒ‚è½½ï¼ˆBind Mountsï¼‰

ç»‘å®šæŒ‚è½½å°†**ä¸»æœºä¸Šçš„ä»»æ„æ–‡ä»¶æˆ–ç›®å½•**ç›´æ¥æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚

#### åŸºæœ¬è¯­æ³•

```bash
docker run -v /host/path:/container/path [é•œåƒ]
# æˆ–ä½¿ç”¨ --mountï¼ˆæ›´æ˜ç¡®ï¼‰
docker run --mount type=bind,source=/host/path,target=/container/path [é•œåƒ]
```

#### ç¤ºä¾‹ï¼šæŒ‚è½½ä»£ç ç›®å½•è¿›è¡Œå¼€å‘

```bash
# å°†å½“å‰é¡¹ç›®ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ /app
docker run -it -v $(pwd):/app node:18 sh
# åœ¨å®¹å™¨å†…ä¿®æ”¹ /app ä¸‹çš„æ–‡ä»¶ï¼Œä¸»æœºæ–‡ä»¶åŒæ­¥æ›´æ–°
```

#### ç‰¹ç‚¹

| ä¼˜ç‚¹                     | ç¼ºç‚¹                                             |
| ------------------------ | ------------------------------------------------ |
| è·¯å¾„çµæ´»ï¼Œå¯æŒ‚è½½ä»»æ„ä½ç½® | ä¾èµ–ä¸»æœºç›®å½•ç»“æ„ï¼Œç§»æ¤æ€§å·®                       |
| é€‚åˆå¼€å‘è°ƒè¯•ï¼ˆå®æ—¶åŒæ­¥ï¼‰ | å®‰å…¨é£é™©é«˜ï¼ˆå¯èƒ½æš´éœ²æ•æ„Ÿè·¯å¾„ï¼‰                   |
| æ— éœ€é¢„å…ˆåˆ›å»º             | ä¸»æœºè·¯å¾„ä¸å­˜åœ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºä¸º**ç›®å½•**ï¼ˆæ˜“å‡ºé”™ï¼ï¼‰ |

> âš ï¸ **æ³¨æ„**ï¼š
> è‹¥ä¸»æœºè·¯å¾„ä¸å­˜åœ¨ï¼ŒDocker ä¼š**é™é»˜åˆ›å»ºä¸€ä¸ªç›®å½•**è€ŒéæŠ¥é”™ã€‚ä¾‹å¦‚ï¼š
>
> ```bash
> docker run -v /nonexist:/data alpine touch /data/file
> ```
>
> æ­¤æ—¶ `/nonexist` åœ¨ä¸»æœºä¸Šä¼šè¢«åˆ›å»ºä¸ºç›®å½•ï¼Œè€Œéä½ æœŸæœ›çš„æ–‡ä»¶ï¼

------

### æ•°æ®å·ï¼ˆVolumesï¼‰

**Volume æ˜¯ Docker æ¨èçš„æŒä¹…åŒ–æ–¹å¼**ï¼Œç”± Docker å¼•æ“ç®¡ç†ï¼Œä¸ä¸»æœºæ–‡ä»¶ç³»ç»Ÿè§£è€¦ã€‚

#### åˆ›å»ºä¸ä½¿ç”¨

```bash
# æ–¹å¼1ï¼šè¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»ºåŒ¿åå·
docker run -v /data nginx  # å·åéšæœºç”Ÿæˆ

# æ–¹å¼2ï¼šæ˜¾å¼åˆ›å»ºå‘½åå·ï¼ˆæ¨èï¼‰
docker volume create my-vol

# æŒ‚è½½å‘½åå·
docker run -v my-vol:/app/data nginx
# æˆ–
docker run --mount type=volume,source=my-vol,target=/app/data nginx
```

#### æŸ¥çœ‹ä¸ç®¡ç†

```bash
# åˆ—å‡ºæ‰€æœ‰å·
docker volume ls

# æŸ¥çœ‹å·è¯¦æƒ…ï¼ˆå«ä¸»æœºå®é™…è·¯å¾„ï¼‰
docker volume inspect my-vol
# è¾“å‡ºç¤ºä¾‹ï¼š
# "Mountpoint": "/var/lib/docker/volumes/my-vol/_data" ï¼ˆåç»­åˆ°æŒ‡å®šä¸ºæ­¢ä¿®æ”¹ä»£ç é…ç½®å³å¯ï¼‰

# åˆ é™¤æœªä½¿ç”¨çš„å·
docker volume rm my-vol
docker volume prune  # æ¸…ç†æ‰€æœ‰æœªè¢«å®¹å™¨å¼•ç”¨çš„å·
```

#### ç‰¹ç‚¹

| ä¼˜ç‚¹                                       | ç¼ºç‚¹                                      |
| ------------------------------------------ | ----------------------------------------- |
| è·¨å¹³å°å…¼å®¹ï¼ˆWindows/Linux/macOS è¡Œä¸ºä¸€è‡´ï¼‰ | æ— æ³•ç›´æ¥æŒ‡å®šä¸»æœºè·¯å¾„                      |
| å®‰å…¨ï¼ˆDocker ç®¡ç†æƒé™å’Œä½ç½®ï¼‰              | éœ€é€šè¿‡ `docker volume inspect` æ‰¾å®é™…è·¯å¾„ |
| æ”¯æŒ Volume Driversï¼ˆå¦‚äº‘å­˜å‚¨æ’ä»¶ï¼‰        | ä¸é€‚åˆéœ€è¦ç²¾ç¡®æ§åˆ¶ä¸»æœºè·¯å¾„çš„åœºæ™¯          |
| å¯å¤‡ä»½ã€è¿ç§»ã€å…±äº«                         | â€”                                         |

> ğŸ’¡ **æœ€ä½³å®è·µ**ï¼š  
>
> - **ç”Ÿäº§ç¯å¢ƒç”¨ Volume**  
> - **å¼€å‘ç¯å¢ƒå¯ç”¨ Bind Mount**

------

### tmpfs æŒ‚è½½ï¼ˆä»… Linuxï¼‰

å°†æ•°æ®æŒ‚è½½åˆ°**å†…å­˜**ä¸­ï¼Œå®¹å™¨åœæ­¢åè‡ªåŠ¨æ¸…é™¤ï¼Œé€‚ç”¨äºæ•æ„Ÿä¸´æ—¶æ•°æ®ï¼ˆå¦‚å¯†ç ã€ä¼šè¯ï¼‰ã€‚

#### è¯­æ³•

```bash
docker run --tmpfs /tmp/cache nginx
# æˆ–
docker run --mount type=tmpfs,destination=/tmp/cache nginx
```

#### é…ç½®é€‰é¡¹ï¼ˆé«˜çº§ï¼‰

```bash
docker run --tmpfs /run:rw,noexec,nosuid,size=65536k nginx
```

å¸¸ç”¨å‚æ•°ï¼š

- `size`ï¼šé™åˆ¶å¤§å°ï¼ˆé»˜è®¤ 50% å†…å­˜ï¼‰
- `mode`ï¼šè®¾ç½®æƒé™ï¼ˆå¦‚ `mode=1777`ï¼‰
- `noexec` / `nosuid`ï¼šå®‰å…¨é™åˆ¶

> âš ï¸ **é™åˆ¶**ï¼š  
>
> - ä»…æ”¯æŒ Linux  
> - ä¸é€‚ç”¨äº Windows/macOSï¼ˆDocker Desktop ä¼šæ¨¡æ‹Ÿï¼Œä½†éçœŸæ­£ tmpfsï¼‰

------

### æŒ‚è½½é€‰é¡¹è¯¦è§£ï¼ˆ--mount vs -vï¼‰

Docker æ”¯æŒä¸¤ç§æŒ‚è½½è¯­æ³•ï¼š**`-v`ï¼ˆç®€å†™ï¼‰** å’Œ **`--mount`ï¼ˆè¯¦ç»†ï¼‰**ã€‚

| ç‰¹æ€§       | `-v` / `--volume`   | `--mount`                       |
| ---------- | ------------------- | ------------------------------- |
| è¯­æ³•ç®€æ´æ€§ | âœ… ç®€æ´              | âŒ å†—é•¿                          |
| å¯è¯»æ€§     | âš ï¸ å‚æ•°é¡ºåºæ˜“æ··æ·†    | âœ… æ˜ç¡®æŒ‡å®š `type,source,target` |
| åŠŸèƒ½å®Œæ•´æ€§ | âŒ ä¸æ”¯æŒ tmpfs é€‰é¡¹ | âœ… æ”¯æŒæ‰€æœ‰æŒ‚è½½ç±»å‹å’Œé€‰é¡¹        |
| æ¨èåœºæ™¯   | å¿«é€Ÿå‘½ä»¤è¡Œæ“ä½œ      | è„šæœ¬ã€Compose æ–‡ä»¶ã€å¤æ‚é…ç½®    |

#### å¯¹æ¯”ç¤ºä¾‹

```bash
# Bind Mountï¼ˆç­‰ä»·ï¼‰
docker run -v /host:/container alpine
docker run --mount type=bind,source=/host,target=/container alpine

# Volumeï¼ˆç­‰ä»·ï¼‰
docker run -v myvol:/data alpine
docker run --mount type=volume,source=myvol,target=/data alpine

# tmpfsï¼ˆåªèƒ½ç”¨ --mountï¼‰
docker run --mount type=tmpfs,target=/tmp alpine
```

> ğŸ“Œ **å®˜æ–¹å»ºè®®**ï¼š  
>
> - æ–°ç”¨æˆ·ä¼˜å…ˆä½¿ç”¨ `--mount`ï¼ˆæ›´æ¸…æ™°ï¼‰  
> - è„šæœ¬å’Œ `docker-compose.yml` ä¸­å¿…é¡»ç”¨ `--mount` é£æ ¼

------

### æŒ‚è½½å¸¸è§åœºæ™¯ä¸æœ€ä½³å®è·µ

#### åœºæ™¯ 1ï¼šæŒä¹…åŒ–æ•°æ®åº“æ•°æ®

```bash
# ä½¿ç”¨ Volumeï¼ˆç”Ÿäº§æ¨èï¼‰
docker volume create mysql-data
docker run -d \
  -v mysql-data:/var/lib/mysql \
  -e MYSQL_ROOT_PASSWORD=123456 \
  mysql:8.0
```

#### åœºæ™¯ 2ï¼šå¼€å‘æ—¶çƒ­æ›´æ–°ä»£ç 

```bash
# ä½¿ç”¨ Bind Mountï¼ˆå¼€å‘æ¨èï¼‰
docker run -it -v $(pwd)/src:/app/src node:18 npm start
```

#### åœºæ™¯ 3ï¼šæŒ‚è½½é…ç½®æ–‡ä»¶

```bash
# æŒ‚è½½å•ä¸ªæ–‡ä»¶ï¼ˆæ³¨æ„ï¼šä¸»æœºæ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼ï¼‰
docker run -v $(pwd)/nginx.conf:/etc/nginx/nginx.conf nginx
```

> âš ï¸ **é‡è¦**ï¼š
> æŒ‚è½½**å•ä¸ªæ–‡ä»¶**æ—¶ï¼Œè‹¥ä¸»æœºæ–‡ä»¶ä¸å­˜åœ¨ï¼ŒDocker ä¼šåˆ›å»ºä¸€ä¸ª**ç›®å½•**è€Œéæ–‡ä»¶ï¼Œå¯¼è‡´å®¹å™¨å¯åŠ¨å¤±è´¥ï¼

#### åœºæ™¯ 4ï¼šåªè¯»æŒ‚è½½ï¼ˆå®‰å…¨åŠ å›ºï¼‰

```bash
# é˜²æ­¢å®¹å™¨ä¿®æ”¹ä¸»æœºæ–‡ä»¶
docker run -v /host/config:/app/config:ro nginx
# æˆ–
docker run --mount type=bind,source=/host/config,target=/app/config,readonly nginx
```

#### åœºæ™¯ 5ï¼šå¤šå®¹å™¨å…±äº«æ•°æ®

```bash
# åˆ›å»ºå…±äº«å·
docker volume create shared-data

# å®¹å™¨ A å†™å…¥
docker run -v shared-data:/data writer-app

# å®¹å™¨ B è¯»å–
docker run -v shared-data:/data reader-app
```

------

### æ•…éšœæ’æŸ¥ä¸æ³¨æ„äº‹é¡¹

1. **æƒé™é—®é¢˜ï¼ˆLinux å¸¸è§ï¼‰**
   å®¹å™¨å†…è¿›ç¨‹ UID ä¸ä¸»æœºæ–‡ä»¶æƒé™ä¸åŒ¹é… â†’ æŒ‚è½½åæ— è¯»å†™æƒé™ã€‚
   **è§£å†³**ï¼š  

   - å¯åŠ¨å®¹å™¨æ—¶æŒ‡å®šç”¨æˆ·ï¼š`--user $(id -u):$(id -g)`  
   - æˆ–åœ¨ Dockerfile ä¸­è°ƒæ•´ç”¨æˆ·æƒé™

2. **SELinux é™åˆ¶ï¼ˆCentOS/RHELï¼‰**
   éœ€æ·»åŠ  `:z` æˆ– `:Z` æ ‡ç­¾ï¼š

   ```bash
   docker run -v /host/path:/container/path:z nginx
   ```

3. **Windows è·¯å¾„æ ¼å¼**
   PowerShell ä¸­éœ€è½¬ä¹‰æˆ–ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š

   ```powershell
   docker run -v C:\my\path:/data nginx  # æ³¨æ„åæ–œæ 
   # æˆ–
   docker run -v ${PWD}:/data nginx
   ```

4. **Docker Desktop æ–‡ä»¶å…±äº«è®¾ç½®ï¼ˆmacOS/Windowsï¼‰**
   é¦–æ¬¡ä½¿ç”¨ Bind Mount å‰ï¼Œéœ€åœ¨ Docker Desktop è®¾ç½®ä¸­**æˆæƒç›®å½•è®¿é—®æƒé™**ã€‚

------







## dockerhub

ç½‘å€ï¼š[Docker Hub Container Image Library | App Containerization](https://hub.docker.com/)ï¼ˆå¼€vpnï¼‰

**Docker Hub** æ˜¯ç”± Docker å®˜æ–¹æä¾›çš„**å…¬å…±å®¹å™¨é•œåƒä»“åº“ï¼ˆRegistryï¼‰æœåŠ¡**ï¼Œç±»ä¼¼äº GitHub ä¹‹äºä»£ç ï¼Œæ˜¯å…¨çƒæœ€ä¸»æµçš„ Docker é•œåƒæ‰˜ç®¡å¹³å°ã€‚å¼€å‘è€…å¯ä»¥åœ¨è¿™é‡Œ **æ‹‰å–ï¼ˆpullï¼‰å…¬å¼€é•œåƒ**ã€**æ¨é€ï¼ˆpushï¼‰è‡ªå·±çš„é•œåƒ**ï¼Œå¹¶è¿›è¡Œå›¢é˜Ÿåä½œä¸ç‰ˆæœ¬ç®¡ç†ã€‚

ä¸€èˆ¬åªæ˜¯ç”¨æ¥çœ‹æ–‡æ¡£ï¼ˆæ³¨æ„ç‰ˆæœ¬å¯¹åº”ï¼‰

-----









## ç®€å•ä¼˜åŒ–

### å‘½ä»¤åˆ«å(docker ps)

é»˜è®¤çš„psæ£€æŸ¥å®¹å™¨è¿è¡Œæƒ…å†µä¹±å¾—ä¸è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨linuxçš„**å‘½ä»¤åˆ«å**æ¥ä¼˜åŒ–å‘½ä»¤ï¼š

è¿›å…¥ .bashrc ä¸­ä¿®æ”¹é…ç½®ï¼ˆ .bashrc æ˜¯ root ä¸‹çš„éšè—æ–‡ä»¶ï¼‰ï¼š

```bash
cd /root

vim .bashrc
```

åœ¨ .bashrc ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š
```bash
alias dps='docker ps --format "table {{.ID}}\t {{.Image}}\t{{.Ports}}\t{{.Status}}\t{{.Names}}"'
```

ä¿å­˜é€€å‡ºåé‡æ–°åŠ è½½é…ç½®ï¼š

```bash
source /root/.bashrc
```

