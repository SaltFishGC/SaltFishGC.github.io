---
title: MybatisPlusç®€ä»‹
date: 2026-1-29
---

mybatisåªæ˜¯ä¸ªæ–¹ä¾¿å†™sqlçš„æ¡†æ¶ï¼Œåªæ˜¯æ˜ å°„äº†Entityï¼Œæ–¹ä¾¿è·å–è¿”å›ResultSetã€‚

è€Œmybatisplusæ˜¯åŸºäºmybatisçš„ORMæ¡†æ¶ï¼ˆä¸ç”¨å†™sqlï¼Œè‡³å°‘**å•è¡¨**ä¸ç”¨ï¼‰

ç°åœ¨ç®€è¦ä»‹ç»ä¸€ä¸‹ï¼š

MyBatis-Plusï¼ˆç®€ç§° MPï¼‰æ˜¯ MyBatis çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºï¼Œä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚ä»¥ä¸‹æ˜¯ **ä»é…ç½®åˆ°åº”ç”¨** çš„ç®€è¦ä»‹ç»ï¼š

------

### **ä¸€ã€æ ¸å¿ƒç‰¹æ€§**

- **æ— ä¾µå…¥**ï¼šåŸºäº MyBatisï¼Œä¸æ”¹å˜å…¶åŸæœ‰åŠŸèƒ½ã€‚
- **å¼ºå¤§çš„ CRUD å°è£…**ï¼šå†…ç½®é€šç”¨ Mapperã€Serviceï¼Œæ— éœ€å†™ SQL å³å¯å®ŒæˆåŸºæœ¬æ“ä½œã€‚
- **Lambda è¡¨è¾¾å¼æ”¯æŒ**ï¼šé¿å…ç¡¬ç¼–ç å­—æ®µåã€‚
- **è‡ªåŠ¨åˆ†é¡µã€é€»è¾‘åˆ é™¤ã€ä¹è§‚é”ã€ä»£ç ç”Ÿæˆå™¨ç­‰**ã€‚

------

### **äºŒã€åŸºæœ¬é…ç½®ï¼ˆä»¥ Spring Boot ä¸ºä¾‹ï¼‰**

#### **1. å¼•å…¥ä¾èµ–ï¼ˆMavenï¼‰**

```xml
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.5.7</version> <!-- ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆ -->
</dependency>
<!-- æ•°æ®åº“é©±åŠ¨ï¼Œå¦‚ MySQL -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
</dependency>
```

#### **2. é…ç½®æ•°æ®æºï¼ˆ**`application.yml`**ï¼‰**

```yml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/test?useUnicode=true&characterEncoding=utf8
    username: root
    password: root
    driver-class-name: com.mysql.cj.jdbc.Driver

mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
  global-config:
    db-config:
      id-type: auto  # ä¸»é”®ç­–ç•¥
```

#### **3. å¯åŠ¨ç±»æ·»åŠ ** `@MapperScan`

```java
@SpringBootApplication
@MapperScan("com.example.mapper") // æ‰«æ Mapper æ¥å£
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

------

### **ä¸‰ã€å®ä½“ç±»ä¸ Mapper å®šä¹‰**

#### **1. å®ä½“ç±»ï¼ˆEntityï¼‰**

```java
@Data
@TableName("user") // æŒ‡å®šè¡¨åï¼ˆè‹¥ç±»åä¸è¡¨åä¸€è‡´å¯çœç•¥ï¼‰
public class User {
    @TableId(type = IdType.AUTO)
    private Long id;
    private String name;
    private Integer age;
    private String email;
}
```

#### **2. Mapper æ¥å£**

```java
public interface UserMapper extends BaseMapper<User> {
    // ç»§æ‰¿ BaseMapper å³æ‹¥æœ‰ 17+ ä¸ªé€šç”¨æ–¹æ³•ï¼ˆinsert, selectById, update ç­‰ï¼‰
}
```

------

### **å››ã€åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹**

#### **1. å¢åˆ æ”¹æŸ¥ï¼ˆæ— éœ€å†™ SQLï¼‰**

```java
@Autowired
private UserMapper userMapper;

// æ’å…¥
userMapper.insert(new User().setName("å¼ ä¸‰").setAge(20));

// æŸ¥è¯¢
User user = userMapper.selectById(1L);

// æ›´æ–°
User update = new User();
update.setId(1L);
update.setName("æå››");
userMapper.updateById(update);

// åˆ é™¤
userMapper.deleteById(1L);
```

#### **2. æ¡ä»¶æ„é€ å™¨ï¼ˆWrapperï¼‰**

```java
// æŸ¥è¯¢ name ä»¥ 'å¼ ' å¼€å¤´ä¸” age > 18 çš„ç”¨æˆ·
QueryWrapper<User> wrapper = new QueryWrapper<>();
wrapper.likeRight("name", "å¼ ").gt("age", 18);
List<User> users = userMapper.selectList(wrapper);

// Lambda å†™æ³•ï¼ˆç±»å‹å®‰å…¨ï¼‰
LambdaQueryWrapper<User> lqw = new LambdaQueryWrapper<>();
lqw.likeRight(User::getName, "å¼ ").gt(User::getAge, 18);
```

#### **3. åˆ†é¡µæŸ¥è¯¢**

```java
// é…ç½®åˆ†é¡µæ’ä»¶ï¼ˆSpring Boot 3.xï¼‰
@Bean
public MybatisPlusInterceptor mybatisPlusInterceptor() {
    MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
    interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));
    return interceptor;
}

// ä½¿ç”¨
Page<User> page = userMapper.selectPage(new Page<>(1, 10), null);
```

------

### **äº”ã€å…¶ä»–å¸¸ç”¨åŠŸèƒ½**

- **é€»è¾‘åˆ é™¤**ï¼šé€šè¿‡ `@TableLogic` æ³¨è§£å®ç°è½¯åˆ é™¤ã€‚
- **è‡ªåŠ¨å¡«å……**ï¼šåˆ›å»ºæ—¶é—´/æ›´æ–°æ—¶é—´è‡ªåŠ¨æ³¨å…¥ï¼ˆ`@TableField(fill = FieldFill.INSERT)`ï¼‰ã€‚
- **ä»£ç ç”Ÿæˆå™¨**ï¼šä¸€é”®ç”Ÿæˆ Entityã€Mapperã€Serviceã€Controllerã€‚
- **å¤šç§Ÿæˆ·ã€SQL æ³¨å…¥å™¨ã€æ€§èƒ½åˆ†ææ’ä»¶**ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ç­‰ã€‚

-----

### å…­ã€å¤ç”¨Mapperæ–‡ä»¶

- MP çš„ `BaseMapper` æ–¹æ³•ï¼ˆå¦‚ `selectById`ï¼‰**é»˜è®¤ä¸ç”Ÿæˆ XML**ï¼Œè€Œæ˜¯é€šè¿‡ MyBatis çš„ `@Select` æ³¨è§£æˆ–å†…éƒ¨æ³¨å…¥å®ç°ã€‚
- ä½ è‡ªå·±çš„ XML ä¸­å®šä¹‰çš„ `<select id="xxx">` åªè¦ **id ä¸ä¸ BaseMapper çš„æ–¹æ³•åé‡å¤**ï¼Œå°±ä¸ä¼šå†²çªã€‚
- å³ä½¿é‡å¤ï¼ŒMyBatis ä¼šä¼˜å…ˆä½¿ç”¨ **XML ä¸­å®šä¹‰çš„ SQL**ï¼ˆè¦†ç›– MP é»˜è®¤è¡Œä¸ºï¼‰ï¼Œä½†ä¸€èˆ¬ä¸å»ºè®®è¿™æ ·åšï¼Œé™¤éä½ æ˜ç¡®è¦é‡å†™ã€‚

> ğŸ“Œ **BaseMapper çš„æ–¹æ³•ååŒ…æ‹¬**ï¼š
> `insert`, `deleteById`, `updateById`, `selectById`, `selectList`, `selectPage` ç­‰ã€‚
> åªè¦ä½ çš„ XML ä¸­ä¸è¦å†™åŒåçš„ `<select id="selectById">`ï¼ˆé™¤éä½ æƒ³è¦†ç›–ï¼‰ï¼Œå°±å®‰å…¨ã€‚

####  **é…ç½®æ­¥éª¤ï¼ˆSpring Bootï¼‰**

 **1. ä¿ç•™åŸæœ‰ XML æ–‡ä»¶ä½ç½®**

ä¾‹å¦‚ï¼š

```
src/main/resources/mapper/UserMapper.xml
```

 **2. é…ç½® MyBatis-Plus æ‰«æ XML**

åœ¨ `application.yml` ä¸­æŒ‡å®š XML è·¯å¾„ï¼š

```yml
mybatis-plus:
  mapper-locations: classpath*:mapper/**/*.xml  # æ‰«ææ‰€æœ‰ mapper ç›®å½•ä¸‹çš„ XML
  configuration:
    map-underscore-to-camel-case: true
  type-aliases-package: com.example.entity
```

> âš ï¸ æ³¨æ„ï¼šç”¨çš„æ˜¯ `mybatis-plus.mapper-locations`ï¼Œä¸æ˜¯ `mybatis.mapper-locations`ï¼ˆè™½ç„¶ MP ä¹Ÿå…¼å®¹åè€…ï¼Œä½†æ¨èç”¨ MP è‡ªå·±çš„é…ç½®é¡¹ï¼‰ã€‚

 **3. Mapper æ¥å£ç»§æ‰¿** `BaseMapper` **å¹¶ä¿ç•™è‡ªå®šä¹‰æ–¹æ³•**

```java
public interface UserMapper extends BaseMapper<User> {

    // å¤ç”¨ XML ä¸­çš„è‡ªå®šä¹‰ SQL
    List<User> selectByName(@Param("name") String name);

    // ä¹Ÿå¯ä»¥å†™æ³¨è§£æ–¹å¼ï¼Œä½† XML æ›´çµæ´»
}
```

å¯¹åº”çš„ `UserMapper.xml`ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.UserMapper">

    <!-- è‡ªå®šä¹‰æ–¹æ³•ï¼Œid å¿…é¡»å’Œæ¥å£æ–¹æ³•åä¸€è‡´ -->
    <select id="selectByName" resultType="com.example.entity.User">
        SELECT * FROM user WHERE name LIKE CONCAT(#{name}, '%')
    </select>

    <!-- âŒ ä¸è¦éšä¾¿å†™ selectByIdï¼Œé™¤éä½ æƒ³è¦†ç›– MP é»˜è®¤è¡Œä¸º -->
    <!-- <select id="selectById">... </select> -->

</mapper>
```

 **4. å¯åŠ¨ç±»ç¡®ä¿æ‰«æ Mapper æ¥å£**

```java
@SpringBootApplication
@MapperScan("com.example.mapper") // æ‰«æä½ çš„ Mapper æ¥å£åŒ…
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```