---
title: IService
date: 2026-1-29
---

`IService` æ˜¯ **MyBatis-Plusï¼ˆMPï¼‰** æä¾›çš„ä¸€ä¸ª**é€šç”¨ Service å±‚æ¥å£**ï¼Œå®ƒå°è£…äº†å¤§é‡å¸¸ç”¨çš„ CRUD æ“ä½œï¼ˆæ¯” `BaseMapper` æ›´é«˜å±‚ï¼‰ï¼Œè®©ä½ åœ¨ Service å±‚å‡ ä¹ä¸ç”¨å†™é‡å¤ä»£ç ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚

------

### ä¸€ã€æ ¸å¿ƒå®šä½

| å±‚çº§              | MP æä¾›çš„æŠ½è±¡                                                |
| ----------------- | ------------------------------------------------------------ |
| **DAO/Mapper å±‚** | `BaseMapper<T>`ï¼ˆ17+ ä¸ªæ–¹æ³•ï¼‰                                |
| **Service å±‚**    | `IService<T>`ï¼ˆ**60+ ä¸ªæ–¹æ³•**ï¼Œå«æ‰¹é‡ã€é“¾å¼ã€åˆ†é¡µã€Lambda ç­‰ï¼‰ |

> âœ… `IService` æ˜¯å¯¹ `BaseMapper` çš„è¿›ä¸€æ­¥å°è£…ï¼Œ**å†…ç½®äº‹åŠ¡ã€æ‰¹å¤„ç†ä¼˜åŒ–ã€é“¾å¼è°ƒç”¨æ”¯æŒ**ã€‚

------

### äºŒã€åŸºæœ¬ä½¿ç”¨æ–¹å¼

#### 1. è‡ªå®šä¹‰ Service æ¥å£ï¼ˆå¯é€‰ï¼‰

```java
public interface UserService extends IService<User> {
    // å¯ä»¥æ‰©å±•è‡ªå®šä¹‰æ–¹æ³•
    List<User> getActiveUsers();
}
```

#### 2. Service å®ç°ç±»ç»§æ‰¿ `ServiceImpl`

```java
@Service
public class UserServiceImpl extends ServiceImpl<UserMapper, User> implements UserService {

    @Override
    public List<User> getActiveUsers() {
        return this.list(new LambdaQueryWrapper<User>().eq(User::getStatus, 1));
    }
}
```

> ğŸ”¸ æ³›å‹ `<UserMapper, User>`ï¼š  
>
> - ç¬¬ä¸€ä¸ªï¼šä½ çš„ Mapper æ¥å£  
> - ç¬¬äºŒä¸ªï¼šå®ä½“ç±»

------

### ä¸‰ã€IService æä¾›çš„æ ¸å¿ƒèƒ½åŠ›ï¼ˆå¸¸ç”¨æ–¹æ³•ï¼‰

#### âœ… 1. åŸºç¡€ CRUDï¼ˆæ¯” Mapper æ›´è¯­ä¹‰åŒ–ï¼‰

```java
// æ’å…¥
boolean save(User entity);                // å•æ¡
boolean saveBatch(Collection<User> list); // æ‰¹é‡ï¼ˆé»˜è®¤ 1000 æ¡ä¸€æ‰¹ï¼‰

// åˆ é™¤
boolean removeById(1L);
boolean removeByMap(map);                 // æŒ‰å­—æ®µå€¼åˆ é™¤
boolean remove(Wrapper<User> queryWrapper);

// æŸ¥è¯¢
User getById(1L);
List<User> list();                        // æŸ¥å…¨éƒ¨
List<User> list(Wrapper<User> queryWrapper);
int count(Wrapper<User> queryWrapper);

// æ›´æ–°
boolean updateById(User entity);
boolean update(User entity, Wrapper<User> updateWrapper);
```

#### âœ… 2. åˆ†é¡µæŸ¥è¯¢ï¼ˆç›´æ¥è¿”å› IPageï¼‰

```java
IPage<User> page = new Page<>(1, 10);
IPage<User> result = userService.page(page, 
    new LambdaQueryWrapper<User>().ge(User::getAge, 18)
);
```

#### âœ… 3. é“¾å¼æŸ¥è¯¢ï¼ˆQueryChain / UpdateChainï¼‰

```java
// é“¾å¼æŸ¥è¯¢
List<User> list = userService.query()
    .likeRight(User::getName, "å¼ ")
    .ge(User::getAge, 18)
    .list();

// é“¾å¼æ›´æ–°
boolean updated = userService.update()
    .set(User::getStatus, 0)
    .lt(User::getAge, 16)
    .update();
```

> ğŸ”¸ é“¾å¼æ“ä½œåº•å±‚ä»ç”¨ Wrapperï¼Œä½†è¯­æ³•æ›´æµç•…ã€‚

#### âœ… 4. æ‰¹é‡æ“ä½œä¼˜åŒ–

```java
// æ‰¹é‡æ’å…¥ï¼ˆè‡ªåŠ¨åˆ†æ‰¹ï¼Œé¿å… OOMï¼‰
userService.saveBatch(list, 1000); // æ¯æ‰¹ 1000 æ¡

// æ‰¹é‡æ›´æ–°ï¼ˆéœ€è‡ªå·±å®ç°ï¼ŒIService ä¸ç›´æ¥æä¾›ï¼Œä½†å¯é€šè¿‡ update + å¾ªç¯ï¼‰
```

#### âœ… 5. è·å–å•ä¸ªå­—æ®µï¼ˆé¿å…æŸ¥å…¨è¡¨ï¼‰

```java
// SELECT name FROM user WHERE id = 1
String name = userService.getOne(
    new LambdaQueryWrapper<User>()
        .select(User::getName)
        .eq(User::getId, 1L),
    false // æ˜¯å¦æŠ›å¼‚å¸¸ï¼ˆfalse è¡¨ç¤ºä¸æŠ›ï¼Œè¿”å› nullï¼‰
).getName();
```

------

### å››ã€ä¸ BaseMapper çš„åŒºåˆ«

| èƒ½åŠ›           | `BaseMapper`              | `IService`                                         |
| -------------- | ------------------------- | -------------------------------------------------- |
| æ‰¹é‡æ’å…¥       | âŒï¼ˆéœ€è‡ªå·±å†™ foreach XMLï¼‰ | âœ… `saveBatch()`ï¼ˆå¸¦åˆ†æ‰¹ï¼‰                          |
| é“¾å¼è°ƒç”¨       | âŒ                         | âœ… `query().eq().list()`                            |
| Service å±‚è¯­ä¹‰ | âŒï¼ˆå±äº DAOï¼‰             | âœ…ï¼ˆå¤©ç„¶åœ¨ Service å±‚ï¼‰                             |
| äº‹åŠ¡æ§åˆ¶       | éœ€æ‰‹åŠ¨åŠ  `@Transactional` | æ–¹æ³•å†…å¯ç»„åˆå¤šä¸ªæ“ä½œï¼Œé…åˆ `@Transactional` æ›´å®‰å…¨ |
| è¿”å›å€¼å°è£…     | åŸºç¡€ç±»å‹                  | æ›´é«˜å±‚ï¼ˆå¦‚ç›´æ¥è¿”å› Entity/List/IPageï¼‰             |

> ğŸ’¡ **æœ€ä½³å®è·µ**ï¼š  
>
> - ç®€å•å•è¡¨æ“ä½œ â†’ ç›´æ¥ç”¨ `IService`  
> - å¤æ‚ SQLï¼ˆJOIN/å­æŸ¥è¯¢ï¼‰â†’ åœ¨ Mapper å†™ XMLï¼ŒService è°ƒç”¨ Mapper

------

### äº”ã€æ³¨æ„äº‹é¡¹

#### 1. æ‰¹é‡æ“ä½œæ€§èƒ½

- `saveBatch()` é»˜è®¤æ¯ 1000 æ¡æäº¤ä¸€æ¬¡ï¼Œé¿å…å¤§äº‹åŠ¡ã€‚
- åº•å±‚ä½¿ç”¨ `ExecutorType.BATCH`ï¼ˆMyBatis æ‰¹å¤„ç†æ¨¡å¼ï¼‰ã€‚

#### 2. äº‹åŠ¡ç®¡ç†

`IService` çš„æ–¹æ³•**æœ¬èº«ä¸å¸¦äº‹åŠ¡**ï¼Œéœ€åœ¨ Service æ–¹æ³•ä¸ŠåŠ  `@Transactional`ï¼š

```java
@Transactional
public void transfer(Long fromId, Long toId, BigDecimal amount) {
    this.updateById(new User().setId(fromId).setBalance(...));
    this.updateById(new User().setId(toId).setBalance(...));
}
```

#### 3. ä¸è¦æ»¥ç”¨

- å¤šè¡¨å…³è”ã€å¤æ‚èšåˆã€æŠ¥è¡¨ç±»æŸ¥è¯¢ â†’ **ä»åº”ä½¿ç”¨è‡ªå®šä¹‰ Mapper + XML**
- `IService` é€‚åˆ**å•è¡¨ä¸šåŠ¡é€»è¾‘**

------

### å…­ã€å…¸å‹åœºæ™¯ç¤ºä¾‹

#### åœºæ™¯ï¼šæ‰¹é‡ç¦ç”¨ä½é¾„ç”¨æˆ·

```java
@Service
public class UserServiceImpl extends ServiceImpl<UserMapper, User> implements UserService {

    @Transactional
    public void disableMinors() {
        // å…ˆæŸ¥å‡ºæ‰€æœ‰ age < 18 çš„ç”¨æˆ· ID
        List<Long> ids = this.listObjs(
            new LambdaQueryWrapper<User>()
                .lt(User::getAge, 18)
                .select(User::getId),
            User::getId
        );

        if (!ids.isEmpty()) {
            // æ‰¹é‡æ›´æ–°çŠ¶æ€
            this.update(
                new User().setStatus(0),
                new LambdaUpdateWrapper<User>().in(User::getId, ids)
            );
        }
    }
}
```

------

### âœ… æ€»ç»“

| ç‰¹æ€§       | è¯´æ˜                                         |
| ---------- | -------------------------------------------- |
| **å®šä½**   | MyBatis-Plus çš„é€šç”¨ Service å±‚å°è£…           |
| **ä¼˜åŠ¿**   | å‡å°‘æ ·æ¿ä»£ç ã€æ”¯æŒæ‰¹é‡ã€é“¾å¼è°ƒç”¨ã€åˆ†é¡µä¸€ä½“åŒ– |
| **é€‚ç”¨**   | å•è¡¨ CRUDã€ç®€å•æ¡ä»¶æ“ä½œ                      |
| **ä¸é€‚ç”¨** | å¤šè¡¨ JOINã€å¤æ‚ SQLã€å­˜å‚¨è¿‡ç¨‹                |
| **æ­é…**   | ç»§æ‰¿ `ServiceImpl<M, T>` + å®ç°è‡ªå®šä¹‰æ¥å£    |

> ğŸ“Œ **è®°ä½**ï¼š
> **â€œMapper å†™å¤æ‚ SQLï¼ŒService ç”¨ IService åšå•è¡¨é€»è¾‘â€** â€”â€” è¿™æ˜¯ MP æœ€é«˜æ•ˆçš„ä½¿ç”¨å§¿åŠ¿ã€‚

å®˜æ–¹æ–‡æ¡£ï¼šhttps://baomidou.com/pages/49cc81/