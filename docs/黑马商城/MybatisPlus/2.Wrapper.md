---
title: æ¡ä»¶æ„é€ å™¨Wrapper
date: 2026-1-29
---

MyBatis-Plusï¼ˆMPï¼‰çš„ **æ¡ä»¶æ„é€ å™¨ï¼ˆWrapperï¼‰** æ˜¯å…¶æ ¸å¿ƒäº®ç‚¹ä¹‹ä¸€ï¼Œç”¨äº**æ„å»ºå¤æ‚çš„æŸ¥è¯¢ã€æ›´æ–°æ¡ä»¶**ï¼Œæ— éœ€æ‰‹å†™ SQL å­—ç¬¦ä¸²ï¼Œé¿å…æ‹¼æ¥é”™è¯¯ï¼ŒåŒæ—¶æ”¯æŒé“¾å¼è°ƒç”¨ã€Lambda è¡¨è¾¾å¼ï¼Œç±»å‹å®‰å…¨ä¸”å¯è¯»æ€§å¼ºã€‚

------

### ä¸€ã€ä¸»è¦ç±»å‹

| ç±»å‹                     | ç”¨é€”                                 |
| ------------------------ | ------------------------------------ |
| `QueryWrapper<T>`        | æŸ¥è¯¢æ¡ä»¶ï¼ˆSELECTï¼‰                   |
| `UpdateWrapper<T>`       | æ›´æ–°æ¡ä»¶ï¼ˆUPDATEï¼‰                   |
| `LambdaQueryWrapper<T>`  | æŸ¥è¯¢æ¡ä»¶ + **Lambda è¡¨è¾¾å¼ï¼ˆæ¨èï¼‰** |
| `LambdaUpdateWrapper<T>` | æ›´æ–°æ¡ä»¶ + **Lambda è¡¨è¾¾å¼ï¼ˆæ¨èï¼‰** |

> âœ… **ä¼˜å…ˆä½¿ç”¨ `LambdaQueryWrapper` / `LambdaUpdateWrapper`**ï¼šå­—æ®µåé€šè¿‡æ–¹æ³•å¼•ç”¨ï¼ˆå¦‚ `User::getName`ï¼‰è·å–ï¼Œé¿å…ç¡¬ç¼–ç å­—ç¬¦ä¸²ï¼Œé‡æ„å®‰å…¨ã€‚

------

### äºŒã€åŸºæœ¬ç”¨æ³•ç¤ºä¾‹

#### 1. æŸ¥è¯¢ï¼š`LambdaQueryWrapper`

```java
@Autowired
private UserMapper userMapper;

// æŸ¥è¯¢ï¼šname ä»¥ "å¼ " å¼€å¤´ ä¸” age >= 18 ä¸” email ä¸ä¸ºç©º
List<User> list = userMapper.selectList(
    new LambdaQueryWrapper<User>()
        .likeRight(User::getName, "å¼ ")     // name LIKE 'å¼ %'
        .ge(User::getAge, 18)              // age >= 18
        .isNotNull(User::getEmail)         // email IS NOT NULL
);
```

#### 2. æ›´æ–°ï¼š`LambdaUpdateWrapper`

```java
// å°†æ‰€æœ‰å¹´é¾„ < 18 çš„ç”¨æˆ· status è®¾ä¸º 0
userMapper.update(
    new User().setStatus(0), // SET status = 0
    new LambdaUpdateWrapper<User>()
        .lt(User::getAge, 18) // WHERE age < 18
);
```

> æ³¨æ„ï¼š`update()` ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ **è¦æ›´æ–°çš„å®ä½“å¯¹è±¡ï¼ˆSET éƒ¨åˆ†ï¼‰**ï¼Œç¬¬äºŒä¸ªæ˜¯æ¡ä»¶ï¼ˆWHERE éƒ¨åˆ†ï¼‰ã€‚

------

### ä¸‰ã€å¸¸ç”¨æ¡ä»¶æ–¹æ³•ï¼ˆé€šç”¨ï¼‰

| æ–¹æ³•                         | SQL æ•ˆæœ                      | ç¤ºä¾‹                                     |
| ---------------------------- | ----------------------------- | ---------------------------------------- |
| `eq`                         | `=`                           | `.eq(User::getAge, 20)` â†’ `age = 20`     |
| `ne`                         | `!=`                          | `.ne(User::getName, "å¼ ä¸‰")`             |
| `gt` / `ge`                  | `>` / `>=`                    | `.ge(User::getAge, 18)`                  |
| `lt` / `le`                  | `<` / `<=`                    | `.lt(User::getScore, 90)`                |
| `like`                       | `LIKE '%å€¼%'`                 | `.like(User::getName, "ä¸‰")`             |
| `likeLeft`                   | `LIKE '%å€¼'`                  | `.likeLeft(User::getName, "ä¸‰")`         |
| `likeRight`                  | `LIKE 'å€¼%'`                  | `.likeRight(User::getName, "å¼ ")`        |
| `isNull` / `isNotNull`       | `IS NULL` / `IS NOT NULL`     | `.isNotNull(User::getEmail)`             |
| `in` / `notIn`               | `IN (...)`                    | `.in(User::getId, Arrays.asList(1,2,3))` |
| `between`                    | `BETWEEN ... AND ...`         | `.between(User::getAge, 18, 30)`         |
| `orderByAsc` / `orderByDesc` | `ORDER BY`                    | `.orderByDesc(User::getCreateTime)`      |
| `groupBy`                    | `GROUP BY`                    | `.groupBy(User::getDeptId)`              |
| `last`                       | **è¿½åŠ ä»»æ„ SQL ç‰‡æ®µï¼ˆæ…ç”¨ï¼‰** | `.last("LIMIT 1")`                       |

> âš ï¸ `last()` æœ‰ SQL æ³¨å…¥é£é™©ï¼Œä»…ç”¨äºæ— æ³•ç”¨ Wrapper è¡¨è¾¾çš„åœºæ™¯ã€‚

------

### å››ã€é«˜çº§ç”¨æ³•

#### 1. æ¡ä»¶åµŒå¥—ï¼ˆAND / ORï¼‰

```java
// (name = 'å¼ ä¸‰' AND age > 20) OR (email LIKE '%@qq.com')
new LambdaQueryWrapper<User>()
    .and(i -> i.eq(User::getName, "å¼ ä¸‰").gt(User::getAge, 20))
    .or()
    .like(User::getEmail, "@qq.com");
```

#### 2. åŠ¨æ€æ¡ä»¶ï¼ˆif åˆ¤æ–­ï¼‰

```java
String name = "å¼ ";
Integer minAge = null;

LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();
wrapper.likeRight(StringUtils.isNotBlank(name), User::getName, name)
       .ge(minAge != null, User::getAge, minAge); // è‡ªåŠ¨è·³è¿‡ null æ¡ä»¶
```

> æ‰€æœ‰æ¡ä»¶æ–¹æ³•éƒ½æ”¯æŒ **ç¬¬ä¸€ä¸ªå‚æ•°ä¸º boolean**ï¼Œç”¨äºæ§åˆ¶æ˜¯å¦æ‹¼æ¥è¯¥æ¡ä»¶ã€‚

#### 3. SELECT æŒ‡å®šå­—æ®µï¼ˆé¿å…æŸ¥å…¨è¡¨ï¼‰

```java
// åªæŸ¥ id å’Œ name
List<User> list = userMapper.selectList(
    new LambdaQueryWrapper<User>()
        .select(User::getId, User::getName)
        .eq(User::getStatus, 1)
);
```

#### 4. å­æŸ¥è¯¢

```java
// WHERE age IN (SELECT age FROM user WHERE dept_id = 10)
new LambdaQueryWrapper<User>()
    .in(User::getAge, 
        new LambdaQueryWrapper<User>()
            .select(User::getAge)
            .eq(User::getDeptId, 10)
    );
```

------

### äº”ã€UpdateWrapper ç‰¹æœ‰åŠŸèƒ½

é™¤äº† WHERE æ¡ä»¶ï¼Œ`UpdateWrapper` è¿˜å¯ä»¥ç›´æ¥åœ¨æ¡ä»¶ä¸­è®¾ç½®å­—æ®µå€¼ï¼ˆæ— éœ€ä¼ å®ä½“ï¼‰ï¼š

```java
// ç­‰ä»·äºï¼šUPDATE user SET age = age + 1 WHERE id = 1
userMapper.update(null,
    new LambdaUpdateWrapper<User>()
        .setSql("age = age + 1") // âŒ ä¸æ¨èï¼Œæœ‰æ³¨å…¥é£é™©
        .eq(User::getId, 1)
);

// âœ… æ¨èï¼šç”¨ set() æ–¹æ³•
userMapper.update(null,
    new LambdaUpdateWrapper<User>()
        .set(User::getAge, 25) // SET age = 25
        .eq(User::getId, 1)
);
```

> å¦‚æœåŒæ—¶ä¼ äº†å®ä½“å’Œ `set()`ï¼Œ**å®ä½“å­—æ®µä¼˜å…ˆçº§æ›´é«˜**ã€‚

------

### å…­ã€æ³¨æ„äº‹é¡¹

1. **å­—æ®µåå¿…é¡»å¯¹åº”æ•°æ®åº“åˆ—å**ï¼ˆæˆ–é€šè¿‡ `@TableField` æ˜ å°„ï¼‰ã€‚
2. **Lambda è¡¨è¾¾å¼è¦æ±‚å­—æ®µæœ‰ getter æ–¹æ³•**ï¼ˆLombok çš„ `@Data` å¯è‡ªåŠ¨ç”Ÿæˆï¼‰ã€‚
3. **ä¸è¦æ»¥ç”¨ `last()`**ï¼Œå°½é‡ç”¨ Wrapper æä¾›çš„æ–¹æ³•ã€‚
4. **å¤æ‚é€»è¾‘ä»å¯å›é€€åˆ° XML**ï¼šWrapper ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¤šè¡¨ JOINã€å¤æ‚èšåˆå»ºè®®ç”¨åŸç”Ÿ MyBatisã€‚

------

### æ€»ç»“

| åœºæ™¯              | æ¨èå†™æ³•                                     |
| ----------------- | -------------------------------------------- |
| ç®€å•å•è¡¨æŸ¥è¯¢/æ›´æ–° | `LambdaQueryWrapper` / `LambdaUpdateWrapper` |
| é¿å…å­—æ®µåç¡¬ç¼–ç   | ç”¨ `Entity::getField`ï¼ˆLambdaï¼‰              |
| åŠ¨æ€æ¡ä»¶          | åˆ©ç”¨ `condition, column, value` ä¸‰å‚æ•°å½¢å¼   |
| å¤æ‚ SQL          | æ··åˆä½¿ç”¨ XML + Wrapper                       |

> ğŸ’¡ **è®°ä½å£è¯€**ï¼š
> **â€œå•è¡¨æ“ä½œç”¨ Wrapperï¼Œå¤šè¡¨å…³è”å†™ XMLï¼›Lambda é˜²é”™åˆå®‰å…¨ï¼ŒåŠ¨æ€æ¡ä»¶é  booleanã€‚â€**

é€šè¿‡æ¡ä»¶æ„é€ å™¨ï¼ŒMyBatis-Plus è®© 80% çš„ CRUD åœºæ™¯å‘Šåˆ«æ‰‹å†™ SQLï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ä¸ä»£ç å¥å£®æ€§ã€‚