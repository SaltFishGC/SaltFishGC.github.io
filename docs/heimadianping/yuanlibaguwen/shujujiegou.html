<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.19">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>数据结构 | SaltFishGC`s Blog</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-C9PpFGGJ.css" as="style"><link rel="stylesheet" href="/assets/style-C9PpFGGJ.css">
    <link rel="modulepreload" href="/assets/app-CohX4sgD.js"><link rel="modulepreload" href="/assets/shujujiegou.html-CxBvPy4h.js">
    <link rel="prefetch" href="/assets/timeline.html-CJnUNOiG.js" as="script"><link rel="prefetch" href="/assets/posts.html-CyjqF1X3.js" as="script"><link rel="prefetch" href="/assets/friendship-link.html-CnoDh8Pl.js" as="script"><link rel="prefetch" href="/assets/1.html-Deb0wl9t.js" as="script"><link rel="prefetch" href="/assets/1.html-DQ0oLu5A.js" as="script"><link rel="prefetch" href="/assets/1.html-Chy6btsl.js" as="script"><link rel="prefetch" href="/assets/index.html-CGMpkAW6.js" as="script"><link rel="prefetch" href="/assets/121501.html-DhjgC1PS.js" as="script"><link rel="prefetch" href="/assets/260215.html-DwZxTZys.js" as="script"><link rel="prefetch" href="/assets/changyongmingling.html-CnYU88yb.js" as="script"><link rel="prefetch" href="/assets/Eletronsuji.html-BdTrk40t.js" as="script"><link rel="prefetch" href="/assets/WebSocketkehuduan.html-DJBZAuQj.js" as="script"><link rel="prefetch" href="/assets/nginx.html-DQ3vw1XP.js" as="script"><link rel="prefetch" href="/assets/session，token，jwt.html-Dj3XmX1n.js" as="script"><link rel="prefetch" href="/assets/sqlitebendihuancun.html-D5pRPA1S.js" as="script"><link rel="prefetch" href="/assets/vuejibensuji.html-WyqmwpVR.js" as="script"><link rel="prefetch" href="/assets/xiugaisheji.html-Cz73i282.js" as="script"><link rel="prefetch" href="/assets/yudaodewenti（qianduan.html-BhtUwJ-M.js" as="script"><link rel="prefetch" href="/assets/Nettysuji.html-Dkx9xZ8d.js" as="script"><link rel="prefetch" href="/assets/yewuzhongxuedaodedongxi（houduan.html-DcvMawhj.js" as="script"><link rel="prefetch" href="/assets/xiugaisheji（houduan.html-_C0W27XV.js" as="script"><link rel="prefetch" href="/assets/tongyangdeyewuchangjing，weixinshizenmezuode？.html-BA0Wtdeh.js" as="script"><link rel="prefetch" href="/assets/duidaimashengchengqideyouhua.html-C70nKC1T.js" as="script"><link rel="prefetch" href="/assets/shujukuhehuancuncunchuxingshizhengli.html-DGhN31rl.js" as="script"><link rel="prefetch" href="/assets/yudaodewenti（houduan.html-BP3c5r-_.js" as="script"><link rel="prefetch" href="/assets/1.jianjie.html-CyCkke6K.js" as="script"><link rel="prefetch" href="/assets/2.zidingyirongqi.html-DsYxrUAc.js" as="script"><link rel="prefetch" href="/assets/3.yingyongbushu.html-C_CriUZk.js" as="script"><link rel="prefetch" href="/assets/4.rongqijiantongxin.html-CTQg4J3_.js" as="script"><link rel="prefetch" href="/assets/1.jianjie.html-DiPvruqX.js" as="script"><link rel="prefetch" href="/assets/2.Wrapper.html-tMAnrQEA.js" as="script"><link rel="prefetch" href="/assets/3.jieheWrapperhemapper.html-C_p7QUOr.js" as="script"><link rel="prefetch" href="/assets/4.zizhiSQL.html-BLT2egI-.js" as="script"><link rel="prefetch" href="/assets/5.IService.html-C70JQG8a.js" as="script"><link rel="prefetch" href="/assets/6.IServicedelambdalianshidiaoyong.html-DoxDUwe3.js" as="script"><link rel="prefetch" href="/assets/7.IServicedepiliangcharu.html-C1J0dY_9.js" as="script"><link rel="prefetch" href="/assets/8.fenyechajian.html-kUKP__xM.js" as="script"><link rel="prefetch" href="/assets/9.ewaigongnen.html-C3982nsI.js" as="script"><link rel="prefetch" href="/assets/1.Spring.html-9kK1BSe_.js" as="script"><link rel="prefetch" href="/assets/2.JWT.html-rP_feSnk.js" as="script"><link rel="prefetch" href="/assets/3.weifuwu.html-S9G2d9R-.js" as="script"><link rel="prefetch" href="/assets/1.bushuyuanxiangmu.html-19x5OYG5.js" as="script"><link rel="prefetch" href="/assets/10.ElasticSearch.html-CeE25xl8.js" as="script"><link rel="prefetch" href="/assets/2.xiangmuchuburenshi.html-BI8C8aIu.js" as="script"><link rel="prefetch" href="/assets/3.fuwuguanli（zhucezhongxinNacos）.html-8C7V-rEF.js" as="script"><link rel="prefetch" href="/assets/4.yuanchengdiaoyong（OpenFeign）.html-DZyKMbVR.js" as="script"><link rel="prefetch" href="/assets/5.weifuwuwangguan（Gateway）.html-Cek4u3Xf.js" as="script"><link rel="prefetch" href="/assets/6.peizhiguanli（peizhizhongxinNacos）.html-DytgU3l5.js" as="script"><link rel="prefetch" href="/assets/7.fuwubaohu（Sentinelrongduanxianliu）.html-C2qIR8vu.js" as="script"><link rel="prefetch" href="/assets/8.fenbushishiwu（Seata）.html-BNv2p4Qq.js" as="script"><link rel="prefetch" href="/assets/9.xiaoxiduilie（MQ）.html-x7MhsdUq.js" as="script"><link rel="prefetch" href="/assets/EX：Commonmokuaidezhuyishixiang.html-DRX-lmcQ.js" as="script"><link rel="prefetch" href="/assets/EX：lianluzhuizong.html-OHavOWDh.js" as="script"><link rel="prefetch" href="/assets/1.duanxindenglu.html-D_fTtJ3k.js" as="script"><link rel="prefetch" href="/assets/10.yonghuqiandao.html-C9GxvzMQ.js" as="script"><link rel="prefetch" href="/assets/11.uvtongji.html-Boc_FuNM.js" as="script"><link rel="prefetch" href="/assets/2.huancun.html-ErmjpVVS.js" as="script"><link rel="prefetch" href="/assets/3.youhuiquanmiaosha.html-DKz5X76y.js" as="script"><link rel="prefetch" href="/assets/4.fenbushisuo(Redisson).html-B8rfKQZO.js" as="script"><link rel="prefetch" href="/assets/5.miaoshayouhua.html-D9U4uA8i.js" as="script"><link rel="prefetch" href="/assets/6.Redisxiaoxiduilie.html-Cr-SGX-j.js" as="script"><link rel="prefetch" href="/assets/7.darentandian.html-CbsNBjgT.js" as="script"><link rel="prefetch" href="/assets/8.haoyouguanzhu.html-Dsbmlb3H.js" as="script"><link rel="prefetch" href="/assets/9.fujianshangpu.html-AYFWlueq.js" as="script"><link rel="prefetch" href="/assets/nacuntaihuan.html-DzuOgHL7.js" as="script"><link rel="prefetch" href="/assets/wangluomoxing.html-Bbb03rE3.js" as="script"><link rel="prefetch" href="/assets/tongxinxieyi.html-6tR5l8K9.js" as="script"><link rel="prefetch" href="/assets/duiRedisUtildegengxin.html-Cl5NlBD9.js" as="script"><link rel="prefetch" href="/assets/Redistexing.html-VhXCLeSF.js" as="script"><link rel="prefetch" href="/assets/changjianyewuwentijibaguwen.html-CHNpyiff.js" as="script"><link rel="prefetch" href="/assets/zaqizabadeyichang.html-DS8Umup6.js" as="script"><link rel="prefetch" href="/assets/baozhuangjianli.html-D683XGj0.js" as="script"><link rel="prefetch" href="/assets/changyongmingling.html-C8_Vco6X.js" as="script"><link rel="prefetch" href="/assets/jianjie.html-m2CZ4AiO.js" as="script"><link rel="prefetch" href="/assets/1.fenbushihuancun.html-BJS0yc8_.js" as="script"><link rel="prefetch" href="/assets/2.duojihuancun.html-CUJSyNKP.js" as="script"><link rel="prefetch" href="/assets/3.zuijiashijian.html-CAmbwx4u.js" as="script"><link rel="prefetch" href="/assets/Rediscunzaidewenti.html-D35Rwt1w.js" as="script"><link rel="prefetch" href="/assets/404.html-XyvByaiD.js" as="script"><link rel="prefetch" href="/assets/Valine.min-C61SASqw.js" as="script"><link rel="prefetch" href="/assets/giscus-aTimukGI-DWEKOTfS.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container show-series show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><img class="logo" src="/doge.jpg" alt="SaltFishGC`s Blog"><a href="/" class="site-name can-hide">SaltFishGC`s Blog</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/blog/1.html" class="link" aria-label="Blog"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Blog<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="笔记"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="笔记"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul class="dropdown-link__container" style="display:none;"><!--[--><li class="dropdown-link__item"><a href="/docs/wx/常用命令" class="link" aria-label="仿wx"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->仿wx<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/docs/黑马点评/项目相关/简介" class="link" aria-label="黑马点评"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->黑马点评<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/docs/黑马商城/Docker/1.简介" class="link" aria-label="黑马商城"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->黑马商城<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--><!----><!----><ul class="social-links navbar-links__item"><!--[--><li class="social-item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:25px;height:25px;"><path d="M16 2a14 14 0 0 0-4.43 27.28c.7.13 1-.3 1-.67v-2.38c-3.89.84-4.71-1.88-4.71-1.88a3.71 3.71 0 0 0-1.62-2.05c-1.27-.86.1-.85.1-.85a2.94 2.94 0 0 1 2.14 1.45a3 3 0 0 0 4.08 1.16a2.93 2.93 0 0 1 .88-1.87c-3.1-.36-6.37-1.56-6.37-6.92a5.4 5.4 0 0 1 1.44-3.76a5 5 0 0 1 .14-3.7s1.17-.38 3.85 1.43a13.3 13.3 0 0 1 7 0c2.67-1.81 3.84-1.43 3.84-1.43a5 5 0 0 1 .14 3.7a5.4 5.4 0 0 1 1.44 3.76c0 5.38-3.27 6.56-6.39 6.91a3.33 3.33 0 0 1 .95 2.59v3.84c0 .46.25.81 1 .67A14 14 0 0 0 16 2z" fill-rule="evenodd" fill="currentColor"></path></svg></li><!--]--></ul></nav><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><header class="sub-navbar-container not-open"><span class="nav-item"><div class="toggle-series-button" aria-expanded="false" role="button" tabindex="0"><span></span><span></span><span></span></div> Series </span></header><!----><!----><div class="theme-main" style=""><aside class="series-container"><!--[--><!--[--><section class="series-group series-item"><h5 class="series-heading series-level-1"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:16px;"><!--[-->仿wx<!--]--></span></span><span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->常用命令<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/wx/changyongmingling.html" class="link series-item series-item" aria-label="常用命令"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->常用命令<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->前端部分<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/wx/qianduanbufen/Eletronsuji.html" class="link series-item series-item" aria-label="Eletron速记"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Eletron速记<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/qianduanbufen/WebSocketkehuduan.html" class="link series-item series-item" aria-label="WebSocket客户端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->WebSocket客户端<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/qianduanbufen/nginx.html" class="link series-item series-item" aria-label="NGINX"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->NGINX<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/qianduanbufen/session，token，jwt.html" class="link series-item series-item" aria-label="session，token，jwt"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->session，token，jwt<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/qianduanbufen/sqlitebendihuancun.html" class="link series-item series-item" aria-label="sqlite本地缓存"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->sqlite本地缓存<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/qianduanbufen/vuejibensuji.html" class="link series-item series-item" aria-label="vue基本速记"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->vue基本速记<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/qianduanbufen/xiugaisheji.html" class="link series-item series-item" aria-label="修改设计"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->修改设计<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/qianduanbufen/yudaodewenti（qianduan.html" class="link series-item series-item" aria-label="遇到的问题（前端）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->遇到的问题（前端）<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->后端部分<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/wx/houduanbufen/Nettysuji.html" class="link series-item series-item" aria-label="Netty速记"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Netty速记<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/houduanbufen/yewuzhongxuedaodedongxi（houduan.html" class="link series-item series-item" aria-label="业务中学到的东西（后端）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->业务中学到的东西（后端）<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/houduanbufen/xiugaisheji（houduan.html" class="link series-item series-item" aria-label="修改设计"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->修改设计<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/houduanbufen/tongyangdeyewuchangjing，weixinshizenmezuode？.html" class="link series-item series-item" aria-label="微信是怎么去解决一些问题的"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->微信是怎么去解决一些问题的<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/houduanbufen/duidaimashengchengqideyouhua.html" class="link series-item series-item" aria-label="对代码生成器的优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->对代码生成器的优化<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/houduanbufen/shujukuhehuancuncunchuxingshizhengli.html" class="link series-item series-item" aria-label="数据库和缓存存储形式整理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->数据库和缓存存储形式整理<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/wx/houduanbufen/yudaodewenti（houduan.html" class="link series-item series-item" aria-label="遇到的问题（后端）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->遇到的问题（后端）<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading series-level-1 active"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:16px;"><!--[-->黑马点评<!--]--></span></span><span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->项目相关<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/heimadianping/xiangmuxiangguan/jianjie.html" class="link series-item series-item" aria-label="项目简介"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->项目简介<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/xiangmuxiangguan/changyongmingling.html" class="link series-item series-item" aria-label="常用命令"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->常用命令<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/xiangmuxiangguan/baozhuangjianli.html" class="link series-item series-item" aria-label="包装简历"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->包装简历<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->业务设计<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/heimadianping/yewusheji/1.duanxindenglu.html" class="link series-item series-item" aria-label="短信登录（session）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->短信登录（session）<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yewusheji/2.huancun.html" class="link series-item series-item" aria-label="缓存"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->缓存<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yewusheji/3.youhuiquanmiaosha.html" class="link series-item series-item" aria-label="优惠券秒杀"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->优惠券秒杀<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yewusheji/4.fenbushisuo(Redisson).html" class="link series-item series-item" aria-label="分布式锁"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->分布式锁<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yewusheji/5.miaoshayouhua.html" class="link series-item series-item" aria-label="秒杀优化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->秒杀优化<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yewusheji/6.Redisxiaoxiduilie.html" class="link series-item series-item" aria-label="Redis消息队列"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Redis消息队列<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yewusheji/7.darentandian.html" class="link series-item series-item" aria-label="达人探店"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->达人探店<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yewusheji/8.haoyouguanzhu.html" class="link series-item series-item" aria-label="好友关注"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->好友关注<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yewusheji/9.fujianshangpu.html" class="link series-item series-item" aria-label="附件商铺"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->附件商铺<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yewusheji/10.yonghuqiandao.html" class="link series-item series-item" aria-label="用户签到"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->用户签到<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yewusheji/11.uvtongji.html" class="link series-item series-item" aria-label="uv统计"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->uv统计<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->高级篇<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/heimadianping/gaojipian/1.fenbushihuancun.html" class="link series-item series-item" aria-label="分布式缓存"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->分布式缓存<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/gaojipian/2.duojihuancun.html" class="link series-item series-item" aria-label="多级缓存"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->多级缓存<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/gaojipian/3.zuijiashijian.html" class="link series-item series-item" aria-label="最佳实践"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->最佳实践<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/gaojipian/Rediscunzaidewenti.html" class="link series-item series-item" aria-label="Redis存在的问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Redis存在的问题<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->原理八股文<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/heimadianping/yuanlibaguwen/wangluomoxing.html" class="link series-item series-item" aria-label="Redis网络模型"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Redis网络模型<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html" class="router-link-active router-link-exact-active link router-link-active series-item series-item" aria-label="数据结构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->数据结构<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yuanlibaguwen/nacuntaihuan.html" class="link series-item series-item" aria-label="内存回收"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->内存回收<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yuanlibaguwen/tongxinxieyi.html" class="link series-item series-item" aria-label="Redis通信协议"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Redis通信协议<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->应用知识<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/heimadianping/yingyongzhishi/Redistexing.html" class="link series-item series-item" aria-label="Redis特性"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Redis特性<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yingyongzhishi/changjianyewuwentijibaguwen.html" class="link series-item series-item" aria-label="常见业务问题以及八股文"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->常见业务问题以及八股文<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimadianping/yingyongzhishi/zaqizabadeyichang.html" class="link series-item series-item" aria-label="杂七杂八的异常"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->杂七杂八的异常<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->对脚手架的更新<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/heimadianping/duijiaoshoujiadegengxin/duiRedisUtildegengxin.html" class="link series-item series-item" aria-label="对RedisUtil的更新"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->对RedisUtil的更新<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading series-level-1"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:16px;"><!--[-->黑马商城<!--]--></span></span><span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Docker<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/heimashangcheng/Docker/1.jianjie.html" class="link series-item series-item" aria-label="Docker简介"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Docker简介<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/Docker/2.zidingyirongqi.html" class="link series-item series-item" aria-label="自制容器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->自制容器<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/Docker/3.yingyongbushu.html" class="link series-item series-item" aria-label="应用部署"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->应用部署<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/Docker/4.rongqijiantongxin.html" class="link series-item series-item" aria-label="容器间通信"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->容器间通信<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->MybatisPlus<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/heimashangcheng/MybatisPlus/1.jianjie.html" class="link series-item series-item" aria-label="MybatisPlus简介"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->MybatisPlus简介<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/MybatisPlus/2.Wrapper.html" class="link series-item series-item" aria-label="条件构造器Wrapper"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->条件构造器Wrapper<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/MybatisPlus/3.jieheWrapperhemapper.html" class="link series-item series-item" aria-label="结合Wrapper和mapper自定义sql"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->结合Wrapper和mapper自定义sql<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/MybatisPlus/4.zizhiSQL.html" class="link series-item series-item" aria-label="自制SQL"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->自制SQL<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/MybatisPlus/5.IService.html" class="link series-item series-item" aria-label="IService"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->IService<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/MybatisPlus/6.IServicedelambdalianshidiaoyong.html" class="link series-item series-item" aria-label="IService的链式调用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->IService的链式调用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/MybatisPlus/7.IServicedepiliangcharu.html" class="link series-item series-item" aria-label="IService的批量插入"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->IService的批量插入<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/MybatisPlus/8.fenyechajian.html" class="link series-item series-item" aria-label="MP的分页插件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->MP的分页插件<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/MybatisPlus/9.ewaigongnen.html" class="link series-item series-item" aria-label="MP的额外功能"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->MP的额外功能<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->八股<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/heimashangcheng/bagu/1.Spring.html" class="link series-item series-item" aria-label="Spring八股"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Spring八股<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/bagu/2.JWT.html" class="link series-item series-item" aria-label="JWT"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->JWT<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/bagu/3.weifuwu.html" class="link series-item series-item" aria-label="微服务"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->微服务<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="series-group series-item"><h6 class="series-heading series-level-2"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->微服务<!--]--></span></span><!----></h6><ul style="display:block;"><li><!--[--><a href="/docs/heimashangcheng/weifuwu/1.bushuyuanxiangmu.html" class="link series-item series-item" aria-label="部署原项目"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->部署原项目<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/2.xiangmuchuburenshi.html" class="link series-item series-item" aria-label="微服务初接触"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->微服务初接触<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/3.fuwuguanli（zhucezhongxinNacos）.html" class="link series-item series-item" aria-label="服务管理"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->服务管理<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/4.yuanchengdiaoyong（OpenFeign）.html" class="link series-item series-item" aria-label="远程调用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->远程调用<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/5.weifuwuwangguan（Gateway）.html" class="link series-item series-item" aria-label="微服务网关"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->微服务网关<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/6.peizhiguanli（peizhizhongxinNacos）.html" class="link series-item series-item" aria-label="配置中心"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->配置中心<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/7.fuwubaohu（Sentinelrongduanxianliu）.html" class="link series-item series-item" aria-label="服务保护"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->服务保护<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/8.fenbushishiwu（Seata）.html" class="link series-item series-item" aria-label="分布式事务"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->分布式事务<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/9.xiaoxiduilie（MQ）.html" class="link series-item series-item" aria-label="消息队列"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->消息队列<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/10.ElasticSearch.html" class="link series-item series-item" aria-label="ElasticSearch"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->ElasticSearch<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/EX：Commonmokuaidezhuyishixiang.html" class="link series-item series-item" aria-label="Common模块的注意事项"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Common模块的注意事项<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/heimashangcheng/weifuwu/EX：lianluzhuizong.html" class="link series-item series-item" aria-label="链路追踪"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->链路追踪<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><div class="page-content"><h1 class="page-title">数据结构</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->SaltFishGC<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2026-1-28<!--]--></span></span><!----><!----><!----></div><div class="theme-reco-md-content"><div><h2 id="数据结构" tabindex="-1"><a class="header-anchor" href="#数据结构"><span>数据结构</span></a></h2><h3 id="动态字符串sds" tabindex="-1"><a class="header-anchor" href="#动态字符串sds"><span>动态字符串sds</span></a></h3><p>Redis 的 <strong>SDS（Simple Dynamic String，简单动态字符串）</strong> 是 Redis 自己实现的字符串数据结构，<strong>完全替代了 C 语言原生的 <code>char\*</code> 字符串</strong>，用于高效、安全地处理字符串操作。它不仅是 Redis 中所有字符串值的底层存储结构，也广泛用于 <strong>Key、Value、命令参数等几乎所有字符串场景</strong>。</p><p>结构：</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">sdshdr</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> len<span class="token punctuation">;</span>        <span class="token comment">// 已使用字节数（不包括 \0）</span></span>
<span class="line">    <span class="token keyword">int</span> alloc<span class="token punctuation">;</span>      <span class="token comment">// 总分配字节数（不包括 \0）</span></span>
<span class="line">    <span class="token keyword">char</span> flags<span class="token punctuation">;</span>     <span class="token comment">// 类型标志（不同长度用不同结构体，Redis 5+ 优化）</span></span>
<span class="line">    <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>     <span class="token comment">// 实际字符数组（柔性数组），末尾自动加 \0</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>📌 注意：Redis 5.0 后对 SDS 做了内存优化，按字符串长度分 5 种类型（sdshdr5/8/16/32/64），但核心思想不变。</p></blockquote><p>在 Redis 中，<strong>所有的 Key 和 Value（当类型为 string 时）都是用 SDS 存储的</strong>。</p><p><strong>🔑 1.</strong> <em><strong>*Key 是 SDS*</strong></em></p><ul><li><p>当你执行 <code>SET user:1001 &quot;Alice&quot;</code>：</p><ul><li><code>&quot;user:1001&quot;</code> 这个 key → 用 SDS 存储</li></ul></li><li><p>便于快速比较、哈希计算、内存管理</p></li></ul><p><strong>💾 2.</strong> <em><strong>*String 类型的 Value 是 SDS*</strong></em></p><ul><li><code>&quot;Alice&quot;</code> 这个 value → 也是 SDS</li><li>支持高效追加（<code>APPEND</code>）、截取（<code>GETRANGE</code>）、长度获取（<code>STRLEN</code>）</li></ul><p><strong>🧱 3.</strong> <em><strong>*其他类型内部也大量使用 SDS*</strong></em></p><ul><li>Hash 的 field 和 value</li><li>List 的每个元素</li><li>Set 的每个成员</li><li>Sorted Set 的 member</li><li>Stream 的 field/value</li><li>Lua 脚本中的字符串</li><li>客户端输入的命令、参数</li></ul><blockquote><p>✅ <strong>可以说：Redis 中几乎所有的“字符串”都是 SDS！</strong></p></blockquote><p>相比较于c的原生字符数组的优化：</p><p><strong>1.</strong> <em><strong>*空间预分配（Preallocate）*</strong></em></p><ul><li>当 SDS 需要扩容时： <ul><li>若新长度 &lt; 1MB → 分配 <strong>2 × 新长度</strong></li><li>若 ≥ 1MB → 分配 <strong>新长度 + 1MB</strong></li></ul></li><li>目的：减少连续 append 导致的频繁 realloc</li></ul><p><strong>2.</strong> <em><strong>*惰性空间释放（Lazy Free）*</strong></em></p><ul><li>当字符串缩短（如 <code>SETRANGE</code>），<strong>不立即释放内存</strong></li><li><code>alloc</code> 不变，<code>len</code> 减小</li><li>后续增长可复用空闲空间</li><li>也可通过 <code>SDS_NOINIT</code> 或显式调用 <code>sdsRemoveFreeSpace()</code> 强制释放</li></ul><blockquote><p>💡 这些策略让 Redis 在高频写入场景下依然保持高性能。</p></blockquote><h3 id="intset" tabindex="-1"><a class="header-anchor" href="#intset"><span>intSet</span></a></h3><p><code>intset</code>（整数集合）是 Redis 内部用于高效存储<strong>整数类型元素的有序集合（Set）</strong> 的一种底层数据结构。当一个 Set 中<strong>所有元素都是整数</strong>，且<strong>元素数量较少</strong>时，Redis 会自动使用 <code>intset</code> 而不是更通用的 <code>hashtable</code>（哈希表），以节省内存并提升性能。</p><p>大致结构：</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">intset</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">uint32_t</span> encoding<span class="token punctuation">;</span>  <span class="token comment">// 编码方式：INTSET_ENC_INT16 / INT32 / INT64</span></span>
<span class="line">    <span class="token class-name">uint32_t</span> length<span class="token punctuation">;</span>    <span class="token comment">// 元素个数</span></span>
<span class="line">    <span class="token class-name">int8_t</span> contents<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 柔性数组，存储实际整数（按 encoding 解释）</span></span>
<span class="line"><span class="token punctuation">}</span> intset<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>encoding</code></td><td style="text-align:left;">当前使用的整数类型： • <code>INTSET_ENC_INT16</code> → 16 位有符号整数（-32768 ～ 32767） • <code>INTSET_ENC_INT32</code> → 32 位（-2³¹ ～ 2³¹-1） • <code>INTSET_ENC_INT64</code> → 64 位（-2⁶³ ～ 2⁶³-1）</td></tr><tr><td style="text-align:left;"><code>length</code></td><td style="text-align:left;">集合中元素的数量</td></tr><tr><td style="text-align:left;"><code>contents</code></td><td style="text-align:left;">紧凑存储的整数数组，<strong>按升序排列</strong>，无重复</td></tr></tbody></table><blockquote><p>💡 所有整数在 <code>contents</code> 中占用相同字节数（由 <code>encoding</code> 决定）。</p></blockquote><ul><li><strong>节省内存</strong>：相比 hashtable，intset 是紧凑的数组结构</li><li><strong>保持有序</strong>：元素天然升序排列，支持快速查找</li><li><strong>自动升级</strong>：根据存入的整数大小，动态选择最合适的整数类型（int16 / int32 / int64）</li><li><strong>仅用于 Set 类型</strong>：是 Redis Set 对象的一种编码方式（<code>encoding = INTSET</code>）</li></ul><h3 id="dict" tabindex="-1"><a class="header-anchor" href="#dict"><span>dict</span></a></h3><p>在 Redis 中，<strong><code>dict</code>（字典）</strong> 是其最核心的底层数据结构之一，<strong>几乎支撑了 Redis 所有键值对存储和哈希类型的操作</strong>。它是 Redis 自己实现的高效哈希表（Hash Table），用于：</p><ul><li>存储整个数据库的 <strong>key-value 映射</strong>（即你 <code>SET name Alice</code> 中的全局 K-V）</li><li>实现 <strong>Hash 类型</strong>（如 <code>HSET user:1001 name Alice age 25</code>）</li><li>用作 <strong>Set、ZSet 的底层结构之一</strong>（当元素较多或含非整数时）</li><li>模块系统、过期 key 管理、客户端连接管理等内部模块</li></ul><p>Redis 的 <code>dict</code> 由两个主要结构体组成：</p><p><strong>1.</strong> <strong><code>dictEntry</code> *<em>—— 哈希桶中的节点*</em></strong></p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">dictEntry</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token operator">*</span>key<span class="token punctuation">;</span>                <span class="token comment">// 键</span></span>
<span class="line">    <span class="token keyword">union</span> <span class="token punctuation">{</span>                   <span class="token comment">// 值（支持多种类型）</span></span>
<span class="line">        <span class="token keyword">void</span> <span class="token operator">*</span>val<span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">uint64_t</span> u64<span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">int64_t</span> s64<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">double</span> d<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> v<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">struct</span> <span class="token class-name">dictEntry</span> <span class="token operator">*</span>next<span class="token punctuation">;</span>   <span class="token comment">// 链表指针（解决哈希冲突）</span></span>
<span class="line"><span class="token punctuation">}</span> dictEntry<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.</strong> <strong><code>dictht</code> *<em>—— 哈希表本身*</em></strong></p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">dictht</span> <span class="token punctuation">{</span></span>
<span class="line">    dictEntry <span class="token operator">*</span><span class="token operator">*</span>table<span class="token punctuation">;</span>     <span class="token comment">// 哈希桶数组（每个元素是一个链表头）</span></span>
<span class="line">    <span class="token keyword">unsigned</span> <span class="token keyword">long</span> size<span class="token punctuation">;</span>    <span class="token comment">// 哈希表大小（桶的数量，总是 2^n）</span></span>
<span class="line">    <span class="token keyword">unsigned</span> <span class="token keyword">long</span> sizemask<span class="token punctuation">;</span> <span class="token comment">// size - 1，用于快速取模：hash &amp; sizemask</span></span>
<span class="line">    <span class="token keyword">unsigned</span> <span class="token keyword">long</span> used<span class="token punctuation">;</span>    <span class="token comment">// 已存元素数量</span></span>
<span class="line"><span class="token punctuation">}</span> dictht<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.</strong> <strong><code>dict</code> *<em>—— 字典对象（包含两个哈希表，用于 rehash）*</em></strong></p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">dict</span> <span class="token punctuation">{</span></span>
<span class="line">    dictType <span class="token operator">*</span>type<span class="token punctuation">;</span>        <span class="token comment">// 类型函数指针（如 key 的 hash/compare/dup/free）</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token operator">*</span>privdata<span class="token punctuation">;</span>        <span class="token comment">// 私有数据（传给 type 函数）</span></span>
<span class="line">    dictht ht<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token comment">// 两个哈希表：ht[0] 正常使用，ht[1] 用于 rehash</span></span>
<span class="line">    <span class="token keyword">long</span> rehashidx<span class="token punctuation">;</span>        <span class="token comment">// rehash 状态：-1=未进行，≥0=正在 rehash 到 ht[1]</span></span>
<span class="line">    <span class="token class-name">int16_t</span> pauserehash<span class="token punctuation">;</span>   <span class="token comment">// 是否暂停 rehash（Redis 6+）</span></span>
<span class="line"><span class="token punctuation">}</span> dict<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>🔑 <strong>关键设计：<code>ht[2]</code> + <code>rehashidx</code> → 支持渐进式 rehash！</strong></p></blockquote><p>使用场景</p><table><thead><tr><th style="text-align:left;">场景</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Redis 数据库本身</strong></td><td style="text-align:left;">每个 DB（0～15）都是一个 <code>dict</code>，key 是 SDS，value 是 <code>redisObject</code></td></tr><tr><td style="text-align:left;"><strong>Hash 类型</strong></td><td style="text-align:left;">当 Hash 元素较多或 value 较大时，底层编码从 <code>ziplist</code> 升级为 <code>hashtable</code>（即 <code>dict</code>）</td></tr><tr><td style="text-align:left;"><strong>Set 类型</strong></td><td style="text-align:left;">当 Set 含非整数 或 元素 &gt; 512 时，从 <code>intset</code> 升级为 <code>hashtable</code></td></tr><tr><td style="text-align:left;"><strong>ZSet（有序集合）</strong></td><td style="text-align:left;">ZSet 是 <code>dict</code> + <code>skiplist</code> 的组合： • <code>dict</code> 用于 O(1) 查找 score • <code>skiplist</code> 用于范围查询</td></tr><tr><td style="text-align:left;"><strong>过期 key 管理</strong></td><td style="text-align:left;"><code>expires</code> 字典：key → 过期时间戳</td></tr><tr><td style="text-align:left;"><strong>客户端连接管理</strong></td><td style="text-align:left;"><code>clients</code> 字典：fd → client 对象</td></tr></tbody></table><blockquote><p>💡 <strong>可以说：没有 <code>dict</code>，就没有 Redis 的 KV 模型！</strong></p></blockquote><blockquote><p><strong>Redis 在查找 key 时，底层使用的是基于哈希表（Hash Table）的 <code>dict</code> 结构</strong>，这是 Redis 实现 <strong>O(1) 平均时间复杂度</strong> 查找的关键。</p></blockquote><p>基本就是和之前学的hashmap一样的hash数组，<strong>冲突</strong>使用<strong>拉链表</strong>的方式，到链表里面再次遍历来解决。</p><p>而就像hashmap，这样的表需要扩容以减少链表过长导致查找长度过长的问题，那么在每次插入新数据时就会检查负载因子是否超标，超过阈值时就会进行哈希表扩容；当删除元素时，同样也会检查是否减少到某一阈值，触发则会收缩哈希表。</p><p>不管是扩容还是收缩，都会对键值对的所有元素进行重新hash并迁移到新的哈希表中。 在这过程中，redis内部可能已经存在了大量的key，这时候全部都一口气hash完可能会导致主线程被阻塞过长时间，这时候我们就需要<strong>渐进式rehash</strong></p><p><strong>渐进式 Rehash（Incremental Rehashing）</strong> 是 Redis 为解决 <strong>哈希表（dict）扩容/缩容时阻塞主线程</strong> 而设计的核心优化机制。它将原本<strong>一次性完成的大量数据迁移工作</strong>，<strong>分摊到多次请求处理中逐步完成</strong>，从而避免服务卡顿，保证 Redis 的高响应性。</p><ul><li>不再一次性迁移所有数据</li><li>每次处理客户端命令时，<strong>顺带迁移一小部分数据</strong></li><li>同时支持 <strong>定时任务主动推进</strong>（防止长时间无请求）</li><li>整个过程对用户透明，服务不中断</li></ul><p><strong>实现步骤：</strong></p><p><strong>1.</strong> <em><em><em>*双哈希表结构（*</em><code>ht[0]</code> *<em>和*</em> <code>ht[1]</code>*</em>）*</em>**</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">dict</span> <span class="token punctuation">{</span></span>
<span class="line">    dictht ht<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">// ht[0] = 当前表, ht[1] = 新表（rehash 时使用）</span></span>
<span class="line">    <span class="token keyword">long</span> rehashidx<span class="token punctuation">;</span>    <span class="token comment">// -1=未 rehash, ≥0=当前迁移的桶索引</span></span>
<span class="line"><span class="token punctuation">}</span> dict<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.</strong> <em><strong>*Rehash 触发条件*</strong></em></p><table><thead><tr><th style="text-align:left;">操作</th><th style="text-align:left;">条件</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>扩容</strong></td><td style="text-align:left;"><code>used / size ≥ 1</code>（普通 dict）或 ≥5（Hash 类型）</td></tr><tr><td style="text-align:left;"><strong>缩容</strong></td><td style="text-align:left;"><code>used / size &lt; 0.1</code> 且 <code>size &gt; DICT_HT_INITIAL_SIZE</code></td></tr></tbody></table><p><strong>3.</strong> <em><strong>*Rehash 执行流程*</strong></em></p><p><strong>步骤 1：初始化</strong></p><ul><li>分配 <code>ht[1]</code> 内存（扩容：2×size；缩容：0.5×size）</li><li>设置 <code>rehashidx = 0</code></li></ul><p><strong>步骤 2：渐进迁移（关键！）</strong></p><p>每次执行以下任一操作时，<strong>自动触发一次小批量迁移</strong>：</p><ul><li>客户端命令（GET/SET/HGET 等）</li><li>定时任务（<code>serverCron</code>，每 100ms 检查）</li></ul><p><strong>迁移逻辑：</strong></p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token comment">// 伪代码</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">dictIsRehashing</span><span class="token punctuation">(</span>dict<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 迁移 1 个桶（或多个，由配置决定）</span></span>
<span class="line">    <span class="token function">_dictRehashStep</span><span class="token punctuation">(</span>dict<span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line">    rehashidx<span class="token operator">++</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>步骤 3：读写操作如何处理？</strong></p><table><thead><tr><th style="text-align:left;">操作</th><th style="text-align:left;">行为</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>查找（GET）</strong></td><td style="text-align:left;">先查 <code>ht[0]</code>，再查 <code>ht[1]</code></td></tr><tr><td style="text-align:left;"><strong>删除（DEL）</strong></td><td style="text-align:left;">在两个表中都尝试删除</td></tr><tr><td style="text-align:left;"><strong>新增（SET）</strong></td><td style="text-align:left;"><strong>只写入 <code>ht[1]</code></strong>（避免重复迁移）</td></tr></tbody></table><p><strong>步骤 4：完成 Rehash</strong></p><ul><li>当 <code>rehashidx == ht[0].size</code>（所有桶迁移完毕）</li><li>释放 <code>ht[0]</code> 内存</li><li>将 <code>ht[1]</code> 赋值给 <code>ht[0]</code></li><li><code>rehashidx = -1</code></li></ul><h3 id="ziplist" tabindex="-1"><a class="header-anchor" href="#ziplist"><span>ZipList</span></a></h3><p><code>ziplist</code>（压缩列表）是 Redis 内部实现的一种<strong>紧凑、连续内存存储的双向链表结构</strong>，专为<strong>节省内存</strong>而设计。它被用作 <strong>Hash、List、ZSet 等数据类型的底层编码之一</strong>，当这些结构中的元素<strong>数量较少且每个元素较小时</strong>，Redis 会自动使用 <code>ziplist</code> 而非更通用的 <code>hashtable</code> 或 <code>linkedlist</code>。</p><table><thead><tr><th style="text-align:left;">特性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>连续内存布局</strong></td><td style="text-align:left;">所有数据存放在一块连续内存中，无指针</td></tr><tr><td style="text-align:left;"><strong>变长编码</strong></td><td style="text-align:left;">整数/字符串按实际大小存储，支持多种长度编码</td></tr><tr><td style="text-align:left;"><strong>双向遍历</strong></td><td style="text-align:left;">可从前向后或从后向前遍历（通过记录前一个 entry 长度）</td></tr><tr><td style="text-align:left;"><strong>内存紧凑</strong></td><td style="text-align:left;">无内存碎片，适合存储大量小对象</td></tr><tr><td style="text-align:left;"><strong>仅适用于小数据集</strong></td><td style="text-align:left;">元素多或值大时会退化为其他结构</td></tr></tbody></table><p><strong>内存中ziplist的结构</strong>：</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token comment">// ziplist 整体内存布局（字节序列）</span></span>
<span class="line"><span class="token operator">&lt;</span>zlbytes<span class="token operator">&gt;</span><span class="token operator">&lt;</span>zltail<span class="token operator">&gt;</span><span class="token operator">&lt;</span>zllen<span class="token operator">&gt;</span><span class="token operator">&lt;</span>entry1<span class="token operator">&gt;</span><span class="token operator">&lt;</span>entry2<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>entryN<span class="token operator">&gt;</span><span class="token operator">&lt;</span>zlend<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">长度</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>zlbytes</code></td><td style="text-align:left;">4 字节</td><td style="text-align:left;">整个 ziplist 占用的总字节数</td></tr><tr><td style="text-align:left;"><code>zltail</code></td><td style="text-align:left;">4 字节</td><td style="text-align:left;">最后一个 entry 的偏移量（用于快速 <code>POP</code>）</td></tr><tr><td style="text-align:left;"><code>zllen</code></td><td style="text-align:left;">2 字节</td><td style="text-align:left;">entry 数量（≤65535，否则需遍历）</td></tr><tr><td style="text-align:left;"><code>entry1...entryN</code></td><td style="text-align:left;">变长</td><td style="text-align:left;">实际数据项（每个 entry 结构见下文）</td></tr><tr><td style="text-align:left;"><code>zlend</code></td><td style="text-align:left;">1 字节</td><td style="text-align:left;">结束标记（值为 <code>0xFF</code>）</td></tr></tbody></table><p><strong>每个</strong> <code>entry</code> <strong>的结构</strong>:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">&lt;prevlen&gt;&lt;encoding&gt;&lt;data&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">部分</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>prevlen</code></strong></td><td style="text-align:left;">前一个 entry 的长度（用于反向遍历） • 若前一个 entry 长度 &lt; 254 → <strong>用 1 字节存储</strong> • 否则 → 用 5 字节（1 字节标记 + 4 字节长度）</td></tr><tr><td style="text-align:left;"><strong><code>encoding</code></strong></td><td style="text-align:left;">当前 entry 的数据类型和长度编码（1～5 字节） • 可表示整数（int16/int32/int64） • 或字符串（长度 0～65535）</td></tr><tr><td style="text-align:left;"><strong><code>data</code></strong></td><td style="text-align:left;">实际数据内容（按 encoding 解释）</td></tr></tbody></table><p>Redis 会在以下情况使用 <code>ziplist</code> 作为底层编码：</p><p><strong>1.</strong> <em><strong>*List 类型*</strong></em></p><ul><li>条件： <ul><li>元素数量 ≤ <code>list-max-ziplist-entries</code>（默认 <strong>512</strong>）</li><li>每个元素大小 ≤ <code>list-max-ziplist-value</code>（默认 <strong>64 字节</strong>）</li></ul></li><li>命令：<code>LPUSH</code>, <code>RPUSH</code>, <code>LPOP</code>, <code>RPOP</code>, <code>LRANGE</code> 等</li></ul><p><strong>2.</strong> <em><strong>*Hash 类型*</strong></em></p><ul><li>条件： <ul><li>field-value 对数量 ≤ <code>hash-max-ziplist-entries</code>（默认 <strong>512</strong>）</li><li>每个 field 或 value 大小 ≤ <code>hash-max-ziplist-value</code>（默认 <strong>64 字节</strong>）（过长变成<code>hashtable</code>）</li></ul></li><li>命令：<code>HSET</code>, <code>HGET</code>, <code>HGETALL</code> 等</li></ul><p><strong>3.</strong> <em><strong>*ZSet（有序集合）*</strong></em>（Redis 7.0 之前）</p><ul><li>条件： <ul><li>元素数量 ≤ <code>zset-max-ziplist-entries</code></li><li>每个 member/score 大小 ≤ <code>zset-max-ziplist-value</code></li></ul></li><li>⚠️ 注意：<strong>Redis 7.0+ 已移除 ziplist 对 ZSet 的支持</strong>，改用 <code>listpack</code></li></ul><blockquote><p>📌 配置示例（redis.conf）：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">hash-max-ziplist-entries <span class="token number">512</span></span>
<span class="line">hash-max-ziplist-value <span class="token number">64</span></span>
<span class="line">list-max-ziplist-entries <span class="token number">512</span></span>
<span class="line">list-max-ziplist-value <span class="token number">64</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="quicklist" tabindex="-1"><a class="header-anchor" href="#quicklist"><span>QuickList</span></a></h3><p><code>QuickList</code> 是 Redis 从 <strong>3.2 版本开始</strong>引入的、用于替代早期 <code>ziplist + linkedlist</code> 组合的 <strong>List 类型底层数据结构</strong>。它的核心思想是：<strong>将多个 <code>ziplist</code>（或 <code>listpack</code>，Redis 7.0+）作为节点，用双向链表（linked list）连接起来</strong>，从而在<strong>内存效率</strong>和<strong>操作性能</strong>之间取得最佳平衡。</p><table><thead><tr><th style="text-align:left;">版本</th><th style="text-align:left;">底层结构</th><th style="text-align:left;">问题</th></tr></thead><tbody><tr><td style="text-align:left;">&lt; 3.2</td><td style="text-align:left;"><code>ziplist</code> 或 <code>adlist</code>（普通双向链表）</td><td style="text-align:left;">• <code>ziplist</code>：修改开销大（连锁更新） • <code>adlist</code>：内存浪费（每个节点有 prev/next 指针 + 内存对齐）</td></tr><tr><td style="text-align:left;">≥ 3.2</td><td style="text-align:left;"><strong><code>QuickList</code></strong></td><td style="text-align:left;">✅ 结合两者优点： • 内存紧凑（每个节点是 ziplist） • 修改局部化（只影响一个 ziplist）</td></tr></tbody></table><blockquote><p>💡 <strong>目标：既要省内存，又要避免大 ziplist 的性能陷阱。</strong></p></blockquote><p>整体结构：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">QuickList</span>
<span class="line">│</span>
<span class="line">├── head → [ziplist1] ↔ [ziplist2] ↔ [ziplist3] ← tail</span>
<span class="line">│          (节点1)     (节点2)     (节点3)</span>
<span class="line">│</span>
<span class="line">└── count: 总元素数量</span>
<span class="line">    len:   ziplist 节点数量</span>
<span class="line">    fill:  每个 ziplist 的最大容量（由配置决定）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>节点的结构：</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">quicklistNode</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">struct</span> <span class="token class-name">quicklistNode</span> <span class="token operator">*</span>prev<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">struct</span> <span class="token class-name">quicklistNode</span> <span class="token operator">*</span>next<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">unsigned</span> <span class="token keyword">char</span> <span class="token operator">*</span>zl<span class="token punctuation">;</span>            <span class="token comment">// 指向 ziplist（或 listpack）的指针</span></span>
<span class="line">    <span class="token class-name">size_t</span> sz<span class="token punctuation">;</span>                    <span class="token comment">// ziplist 占用字节数</span></span>
<span class="line">    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> count <span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">;</span>      <span class="token comment">// 该 ziplist 中的元素个数</span></span>
<span class="line">    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> encoding <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">// RAW=1（未压缩）, LZF=2（LZF 压缩）</span></span>
<span class="line">    <span class="token comment">// ... 其他标志位</span></span>
<span class="line"><span class="token punctuation">}</span> quicklistNode<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>⚠️ 注意：<strong>每个节点内部是一个完整的 ziplist（Redis 7.0+ 是 listpack）</strong>。</p></blockquote><h3 id="skiplist" tabindex="-1"><a class="header-anchor" href="#skiplist"><span>SkipList</span></a></h3><p><code>SkipList</code>（跳表）是 Redis 中 <strong>有序集合（Sorted Set，ZSet）</strong> 的核心底层数据结构之一（另一个是 <code>dict</code>）。它是一种<strong>概率性、多层链表结构</strong>，能在 <strong>O(log N) 平均时间复杂度</strong> 下完成插入、删除、查找和范围查询，同时实现简单、易于并发扩展。</p><table><thead><tr><th style="text-align:left;">数据结构</th><th style="text-align:left;">优点</th><th style="text-align:left;">缺点</th><th style="text-align:left;">Redis 选择原因</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>红黑树 / AVL 树</strong></td><td style="text-align:left;">严格 O(log N)</td><td style="text-align:left;">实现复杂，旋转操作难并发</td><td style="text-align:left;">❌ 复杂度高</td></tr><tr><td style="text-align:left;"><strong>B/B+ 树</strong></td><td style="text-align:left;">磁盘友好</td><td style="text-align:left;">内存中无优势</td><td style="text-align:left;">❌ 不适合内存数据库</td></tr><tr><td style="text-align:left;"><strong>SkipList</strong></td><td style="text-align:left;">✅ 实现简单 ✅ 天然支持范围查询 ✅ 易于并发（加锁粒度小） ✅ 内存局部性较好</td><td style="text-align:left;">概率性 O(log N) 额外指针开销</td><td style="text-align:left;">✅</td></tr></tbody></table><blockquote><p><strong>“给链表加索引” —— 类似书籍目录</strong></p></blockquote><ul><li>底层（Level 0）：包含所有元素的<strong>有序双向链表</strong></li><li>上层（Level 1～N）：<strong>部分元素的“快速通道”</strong></li><li>每一层都是下一层的<strong>子集</strong>，越高层越稀疏</li><li>查找时从<strong>最高层开始</strong>，逐步向下“跳转”，大幅减少比较次数</li></ul><p><strong>节点结构（<code>zskiplistNode</code>）</strong></p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">zskiplistNode</span> <span class="token punctuation">{</span></span>
<span class="line">    sds ele<span class="token punctuation">;</span>                <span class="token comment">// 成员对象（字符串，如 &quot;user:1001&quot;）</span></span>
<span class="line">    <span class="token keyword">double</span> score<span class="token punctuation">;</span>           <span class="token comment">// 分值（用于排序）</span></span>
<span class="line">    <span class="token keyword">struct</span> <span class="token class-name">zskiplistNode</span> <span class="token operator">*</span>backward<span class="token punctuation">;</span> <span class="token comment">// 后退指针（仅 Level 0 有效）</span></span>
<span class="line">    <span class="token keyword">struct</span> <span class="token class-name">zskiplistLevel</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">struct</span> <span class="token class-name">zskiplistNode</span> <span class="token operator">*</span>forward<span class="token punctuation">;</span> <span class="token comment">// 前进指针</span></span>
<span class="line">        <span class="token keyword">unsigned</span> <span class="token keyword">long</span> span<span class="token punctuation">;</span>            <span class="token comment">// 到 forward 节点的跨度（用于 rank 计算）</span></span>
<span class="line">    <span class="token punctuation">}</span> level<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>              <span class="token comment">// 柔性数组，每层一个 forward + span</span></span>
<span class="line"><span class="token punctuation">}</span> zskiplistNode<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>跳表结构（<code>zskiplist</code>）</strong></p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">zskiplist</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">struct</span> <span class="token class-name">zskiplistNode</span> <span class="token operator">*</span>header<span class="token punctuation">,</span> <span class="token operator">*</span>tail<span class="token punctuation">;</span> <span class="token comment">// 头尾节点</span></span>
<span class="line">    <span class="token keyword">unsigned</span> <span class="token keyword">long</span> length<span class="token punctuation">;</span>                <span class="token comment">// 元素总数</span></span>
<span class="line">    <span class="token keyword">int</span> level<span class="token punctuation">;</span>                           <span class="token comment">// 当前最大层数</span></span>
<span class="line"><span class="token punctuation">}</span> zskiplist<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>🔑 关键设计亮点：</strong></p><ul><li><strong>双向链表</strong>：<code>backward</code> 指针支持反向遍历（如 <code>ZREVRANGE</code>）</li><li><strong>span 字段</strong>：记录到下一节点的<strong>跨度</strong>，使得 <code>ZRANK</code> 可在 O(log N) 内完成</li><li><strong>头节点（header）</strong>：不存实际数据，<code>level</code> 固定为 32 层（最大支持）</li></ul><h3 id="redisobject" tabindex="-1"><a class="header-anchor" href="#redisobject"><span>RedisObject</span></a></h3><p><code>redisObject</code>（常缩写为 <strong>robj</strong>）是 Redis 中<strong>最核心的对象封装结构</strong>，<strong>所有 Redis 数据类型（String、List、Hash、Set、ZSet）的值在内存中都以 <code>redisObject</code> 的形式存在</strong>。它不仅统一了不同类型数据的表示方式，还支持<strong>内存优化、引用计数、LRU 淘汰、类型检查</strong>等关键功能。</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre><code><span class="line"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">redisObject</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">unsigned</span> type<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>        <span class="token comment">// 对象类型（5种基本类型）</span></span>
<span class="line">    <span class="token keyword">unsigned</span> encoding<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">// 编码方式（底层数据结构）</span></span>
<span class="line">    <span class="token keyword">unsigned</span> lru<span class="token operator">:</span><span class="token number">24</span><span class="token punctuation">;</span>        <span class="token comment">// LRU 时间戳 或 LFU 计数（用于淘汰）</span></span>
<span class="line">    <span class="token keyword">int</span> refcount<span class="token punctuation">;</span>           <span class="token comment">// 引用计数（内存回收）</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token operator">*</span>ptr<span class="token punctuation">;</span>              <span class="token comment">// 指向实际数据的指针</span></span>
<span class="line"><span class="token punctuation">}</span> robj<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><code>type</code> —— 对象类型（用户可见）</strong></p><table><thead><tr><th style="text-align:left;">值</th><th style="text-align:left;">宏定义</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">0</td><td style="text-align:left;"><code>OBJ_STRING</code></td><td style="text-align:left;">字符串</td></tr><tr><td style="text-align:left;">1</td><td style="text-align:left;"><code>OBJ_LIST</code></td><td style="text-align:left;">列表</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;"><code>OBJ_SET</code></td><td style="text-align:left;">集合</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;"><code>OBJ_ZSET</code></td><td style="text-align:left;">有序集合</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;"><code>OBJ_HASH</code></td><td style="text-align:left;">哈希</td></tr></tbody></table><blockquote><p>✅ 通过 <code>TYPE key</code> 命令返回的就是这个值。</p></blockquote><p><strong><code>encoding</code>—— 编码方式（底层实现）</strong></p><table><thead><tr><th style="text-align:left;">类型</th><th style="text-align:left;">可能的 encoding</th><th style="text-align:left;">底层结构</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>String</strong></td><td style="text-align:left;"><code>OBJ_ENCODING_INT</code></td><td style="text-align:left;">long 整数（直接存数值）</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;"><code>OBJ_ENCODING_EMBSTR</code></td><td style="text-align:left;">embstr 编码 SDS（≤44字节）</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;"><code>OBJ_ENCODING_RAW</code></td><td style="text-align:left;">raw 编码 SDS（&gt;44字节）</td></tr><tr><td style="text-align:left;"><strong>List</strong></td><td style="text-align:left;"><code>OBJ_ENCODING_QUICKLIST</code></td><td style="text-align:left;">QuickList（Redis 3.2+）</td></tr><tr><td style="text-align:left;"><strong>Hash</strong></td><td style="text-align:left;"><code>OBJ_ENCODING_ZIPLIST</code></td><td style="text-align:left;">ziplist（小 Hash）</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;"><code>OBJ_ENCODING_HASHTABLE</code></td><td style="text-align:left;">dict（大 Hash）</td></tr><tr><td style="text-align:left;"><strong>Set</strong></td><td style="text-align:left;"><code>OBJ_ENCODING_INTSET</code></td><td style="text-align:left;">intset（整数集合）</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;"><code>OBJ_ENCODING_HT</code></td><td style="text-align:left;">dict（含字符串或大集合）</td></tr><tr><td style="text-align:left;"><strong>ZSet</strong></td><td style="text-align:left;"><code>OBJ_ENCODING_ZIPLIST</code></td><td style="text-align:left;">ziplist（小 ZSet，Redis 6 及以前）</td></tr><tr><td style="text-align:left;"></td><td style="text-align:left;"><code>OBJ_ENCODING_SKIPLIST</code></td><td style="text-align:left;">skiplist + dict（大 ZSet）</td></tr></tbody></table><blockquote><p>📌 <strong>可通过 <code>OBJECT ENCODING key</code> 查看当前编码</strong>。</p></blockquote><h2 id="五种基本数据类型的编码方式" tabindex="-1"><a class="header-anchor" href="#五种基本数据类型的编码方式"><span>五种基本数据类型的编码方式</span></a></h2><h3 id="string" tabindex="-1"><a class="header-anchor" href="#string"><span>String</span></a></h3><table><thead><tr><th style="text-align:left;">编码（<code>encoding</code>）</th><th style="text-align:left;">存储形式</th><th style="text-align:left;">适用条件</th><th style="text-align:left;">内存/性能特点</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>INT</code></strong></td><td style="text-align:left;">直接存储 <code>long</code> 整数值</td><td style="text-align:left;">字符串内容是 <strong>可表示为 long 的整数</strong> （如 <code>&quot;123&quot;</code>, <code>&quot;-456&quot;</code>）</td><td style="text-align:left;">⭐⭐⭐ • 零额外内存（值直接存指针中） • 计算极快（如 <code>INCR</code> 直接 +1）</td></tr><tr><td style="text-align:left;"><strong><code>EMBSTR</code></strong></td><td style="text-align:left;"><strong>embstr 编码的 SDS</strong></td><td style="text-align:left;">字符串长度 <strong>≤ 44 字节</strong>（Redis 3.2+）</td><td style="text-align:left;">⭐⭐ • 一次内存分配 • robj + SDS 连续存储 • 只读（修改会转为 RAW）</td></tr><tr><td style="text-align:left;"><strong><code>RAW</code></strong></td><td style="text-align:left;"><strong>raw 编码的 SDS</strong></td><td style="text-align:left;">字符串长度 <strong>&gt; 44 字节</strong></td><td style="text-align:left;">⭐ • robj 和 SDS 分两次分配 • 可变（支持 APPEND 等修改）</td></tr></tbody></table><blockquote><p>🔑 所有 String 对象的 <code>type = OBJ_STRING</code>，但 <code>encoding</code> 不同。</p></blockquote><h3 id="list" tabindex="-1"><a class="header-anchor" href="#list"><span>List</span></a></h3><p>Redis 的 <strong>List（列表）</strong> 是一个<strong>有序、可重复、支持双向操作</strong>的字符串集合，底层基于 <strong>QuickList</strong>（Redis 3.2+）实现。它广泛用于消息队列、最新动态、任务调度等场景。</p><table><thead><tr><th style="text-align:left;">特性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>有序</strong></td><td style="text-align:left;">元素按插入顺序排列，支持索引访问（0 起始）</td></tr><tr><td style="text-align:left;"><strong>可重复</strong></td><td style="text-align:left;">允许相同元素多次出现</td></tr><tr><td style="text-align:left;"><strong>双向操作</strong></td><td style="text-align:left;">支持头尾高效插入/删除（O(1)）</td></tr><tr><td style="text-align:left;"><strong>阻塞操作</strong></td><td style="text-align:left;"><code>BLPOP</code>/<code>BRPOP</code> 可实现阻塞队列</td></tr><tr><td style="text-align:left;"><strong>最大长度</strong></td><td style="text-align:left;">理论上 2³² - 1 个元素（约 42 亿）</td></tr></tbody></table><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 每个 listpack 最大容量（默认 -2 = ≤8KB）</span></span>
<span class="line">list-max-listpack-size <span class="token parameter variable">-2</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 压缩深度（0=不压缩，1=除头尾外都压缩）</span></span>
<span class="line">list-compress-depth <span class="token number">0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="set" tabindex="-1"><a class="header-anchor" href="#set"><span>Set</span></a></h3><p>Redis 的 <strong>Set（集合）</strong> 是一个<strong>无序、唯一、支持高效交并差运算</strong>的字符串集合。它底层根据数据特征自动在 <strong><code>intset</code>（整数集合）</strong> 和 <strong><code>hashtable</code>（哈希表）</strong> 之间切换，兼顾内存效率与操作性能。</p><table><thead><tr><th style="text-align:left;">特性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>无序</strong></td><td style="text-align:left;">元素没有顺序（不保证插入顺序）</td></tr><tr><td style="text-align:left;"><strong>唯一性</strong></td><td style="text-align:left;">自动去重，相同元素只存一份</td></tr><tr><td style="text-align:left;"><strong>成员类型</strong></td><td style="text-align:left;">所有元素都是字符串（但可表示整数）</td></tr><tr><td style="text-align:left;"><strong>高效操作</strong></td><td style="text-align:left;">添加/删除/查找平均 <strong>O(1)</strong></td></tr><tr><td style="text-align:left;"><strong>集合运算</strong></td><td style="text-align:left;">支持交集（<code>SINTER</code>）、并集（<code>SUNION</code>）、差集（<code>SDIFF</code>）</td></tr></tbody></table><p>Redis Set 会根据 <strong>元素类型</strong> 和 <strong>数量</strong> 自动选择最优编码：</p><table><thead><tr><th style="text-align:left;">编码</th><th style="text-align:left;">底层结构</th><th style="text-align:left;">触发条件</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>intset</code></strong></td><td style="text-align:left;">紧凑整数数组</td><td style="text-align:left;">• 所有元素都是<strong>整数</strong> • 元素数量 ≤ <code>set-max-intset-entries</code>（默认 <strong>512</strong>）</td></tr><tr><td style="text-align:left;"><strong><code>hashtable</code></strong></td><td style="text-align:left;">Redis dict（哈希表）</td><td style="text-align:left;">• 含<strong>非整数元素</strong> • 或元素数量 <strong>&gt; 512</strong></td></tr></tbody></table><blockquote><p>📌 配置项（redis.conf）：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">set-max-intset-entries <span class="token number">512</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></blockquote><h3 id="zset" tabindex="-1"><a class="header-anchor" href="#zset"><span>ZSet</span></a></h3><p>Redis 的 <strong>ZSet（Sorted Set，有序集合）</strong> 是 Redis 最强大的数据结构之一，它结合了 <strong>Set 的唯一性</strong> 和 <strong>Score 的排序能力</strong>，支持 <strong>按分值范围高效查询、排名计算、Top N 排行榜</strong> 等操作。其底层由 <strong><code>dict</code> + <code>skiplist</code></strong> 共同实现，兼顾单点查找与范围扫描。</p><table><thead><tr><th style="text-align:left;">特性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>唯一性</strong></td><td style="text-align:left;">member（成员）不可重复</td></tr><tr><td style="text-align:left;"><strong>有序性</strong></td><td style="text-align:left;">按 <strong>score（分值）</strong> 升序排列（score 可相同，此时按 member 字典序）</td></tr><tr><td style="text-align:left;"><strong>双索引</strong></td><td style="text-align:left;">• 通过 member → O(1) 查 score • 通过 score 范围 → O(log N + M) 查 members</td></tr><tr><td style="text-align:left;"><strong>支持浮点数</strong></td><td style="text-align:left;">score 是 double 类型（64 位浮点）</td></tr><tr><td style="text-align:left;"><strong>典型应用</strong></td><td style="text-align:left;">排行榜、延迟队列、带权重的任务调度</td></tr></tbody></table><p>Redis 的 ZSet <strong>不是单一结构</strong>，而是两个数据结构的组合：</p><table><thead><tr><th style="text-align:left;">结构</th><th style="text-align:left;">作用</th><th style="text-align:left;">时间复杂度</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>dict</code></strong></td><td style="text-align:left;">• Key = member（SDS） • Value = score（double）</td><td style="text-align:left;"><code>ZSCORE</code>, <code>ZREVRANK</code> → <strong>O(1)</strong></td></tr><tr><td style="text-align:left;"><strong><code>skiplist</code></strong></td><td style="text-align:left;">• 按 score 排序的双向链表 • 每层带 span（跨度）</td><td style="text-align:left;"><code>ZRANGE</code>, <code>ZRANK</code> → <strong>O(log N)</strong></td></tr></tbody></table><blockquote><p>💡 <strong>两者共享 member 和 score 数据</strong>，通过指针关联，内存不重复。</p></blockquote><p><strong>🔍 为什么不用平衡树？</strong></p><ul><li>SkipList 实现更简单、易于调试</li><li>天然支持范围查询（链表顺序遍历）</li><li>span 字段可高效计算 rank</li></ul><h3 id="hash" tabindex="-1"><a class="header-anchor" href="#hash"><span>Hash</span></a></h3><p>Redis 的 <strong>Hash（哈希）</strong> 是一个<strong>键值对集合</strong>，特别适合存储<strong>对象的多个字段</strong>（如用户资料、商品属性）。它在内存中根据数据规模自动在 <strong><code>ziplist</code>（或 <code>listpack</code>）</strong> 和 <strong><code>hashtable</code>（dict）</strong> 之间切换，兼顾小对象的内存效率与大对象的操作性能。</p><table><thead><tr><th style="text-align:left;">特性</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>结构</strong></td><td style="text-align:left;">field-value 映射（field 和 value 都是字符串）</td></tr><tr><td style="text-align:left;"><strong>无序</strong></td><td style="text-align:left;">不保证 field 的顺序（Redis 4.0+ 按插入顺序遍历，但不承诺有序）</td></tr><tr><td style="text-align:left;"><strong>高效访问</strong></td><td style="text-align:left;">单个 field 的增删改查为 <strong>O(1)</strong></td></tr><tr><td style="text-align:left;"><strong>内存优化</strong></td><td style="text-align:left;">小 Hash 使用紧凑编码（ziplist/listpack）</td></tr><tr><td style="text-align:left;"><strong>典型用途</strong></td><td style="text-align:left;">存储对象（如 user:{id} 包含 name/age/email）</td></tr></tbody></table><p>Redis Hash 会根据 <strong>field-value 数量</strong> 和 <strong>值大小</strong> 自动选择编码：</p><table><thead><tr><th style="text-align:left;">编码</th><th style="text-align:left;">底层结构</th><th style="text-align:left;">触发条件（默认）</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>ziplist</code></strong>（Redis 7.0） <strong><code>listpack</code></strong>（Redis ≥ 7.0）</td><td style="text-align:left;">紧凑连续内存</td><td style="text-align:left;">• field-value 对数 ≤ <strong>512</strong> • 每个 field 或 value 长度 ≤ <strong>64 字节</strong></td></tr><tr><td style="text-align:left;"><strong><code>hashtable</code></strong></td><td style="text-align:left;">Redis dict（哈希表）</td><td style="text-align:left;">• 超出上述任一限制</td></tr></tbody></table><blockquote><p>📌 配置项（redis.conf）：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">hash-max-listpack-entries 512    # 原名 hash-max-ziplist-entries</span>
<span class="line">hash-max-listpack-value 64       # 原名 hash-max-ziplist-value</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><blockquote><p>💡 <strong>注意</strong>：Redis 7.0+ 底层已用 <code>listpack</code> 替代 <code>ziplist</code>（消除连锁更新），但配置名仍保留 <code>*ziplist*</code> 兼容旧版。</p></blockquote></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Last Updated 2/15/2026, 4:06:28 PM<!--]--></span></span></div></footer><nav class="page-nav"><p class="hasPrev hasNext inner"><span class="page-nav-item prev"> ← Redis网络模型</span><span class="page-nav-item next">内存回收 → </span></p></nav><!----></div><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#数据结构" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="数据结构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->数据结构<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#动态字符串sds" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="动态字符串sds"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->动态字符串sds<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#intset" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="intSet"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->intSet<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#dict" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="dict"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->dict<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#ziplist" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="ZipList"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->ZipList<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#quicklist" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="QuickList"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->QuickList<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#skiplist" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="SkipList"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->SkipList<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#redisobject" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="RedisObject"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->RedisObject<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#五种基本数据类型的编码方式" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="五种基本数据类型的编码方式"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->五种基本数据类型的编码方式<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#string" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="String"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->String<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#list" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="List"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->List<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#set" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Set"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Set<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#zset" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="ZSet"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->ZSet<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/heimadianping/yuanlibaguwen/shujujiegou.html#hash" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Hash"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Hash<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></main><!--]--></div></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CohX4sgD.js" defer></script>
  </body>
</html>
