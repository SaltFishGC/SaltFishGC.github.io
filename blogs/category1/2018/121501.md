---
title: 关于如何利用github pages搭建个人博客
date: 2025/6/20
tags:
 - 博客
categories:
 - blog
---

搞了一圈，终于算是明白github pages到底是怎么自动化搭建博客的了。
网上的教程很多，这里就不再赘述了，这里主要是帮xd们梳理一下概念以及大致流程，顺便记录一下自己搭建博客的过程，以及踩过的坑。

# 简要介绍

本项目的blog搭建脚手架选择了[vuepress](https://vuepress.vuejs.org/zh/)，这是一个基于vue的静态网站生成器，可以很方便的生成静态网站，同时支持markdown语法，可以很方便的写博客。
选择的模版是[vuepress-theme-reco](https://vuepress-theme-reco.recoluan.com/)，这是一个非常炫酷的模版，你可以在这个的基础上更进开发。

# 概念梳理

## vuepress

vuepress是一个静态网站生成器，其会基于你所给出的md文件等静态文件（如图片，css，js）渲染一个静态网页，也就是说，只要你搞好了配置，把md文件扔进去，然后利用vuepress提供的`npm run build`命令

> 或者是`yarn docs:build`，这个基于你的工具，也有可能是`npm run build`，这一个命令看你所使用脚手架的package.json文件：
>
> ```json
>   "scripts": {
>     "dev": "vuepress dev .",
>     "start": "vuepress dev .",
>     "build": "vuepress build ."
>   },
> ```
> 如在这里，json键值对的key值为dev，start，build，分别对应dev，start，build命令。其他的脚手架可能key值不同，比方说“docs:build”，请自行查看。我们所需要的是值为"vuepress build ."这一条的key值，只有这一条一定要准确！不能出错，否则自动配置的部署部分会报错！现在记不住不用担心，后面写自动化脚本了，我会提醒bro回去看一眼这个key值是否对的上。

就会生成一个静态web，这个web项目会被放到`.vuepress/dist`文件夹下（一般情况下vuepress都会将最终的web生成在这里，推荐还是仔细看一下自己选的脚手架是否有不同），所以注意`.vuepress`文件夹的路径，后续我们在写自动化的sh文件时这个路径也不能错，如果是在根路径那就不用加前缀了，**假如.vuepress文件夹不是在你的项目根路径下，那一定要把项目中的父路径加上！**

这里需要明确一点：**最终生成的静态web才是最终展示的page**，而vuepress只是生成器，请注意。

## Github Page

github page提供了静态网页的展示，你可以搞一个个人的page（username.github.io）也可以是仓库的（repo）。

在仓库的setting --> page页面下可以配置该仓库的page，这里使用个人的github page，会自动配置page，完成配置后会显示具体分配的网页ip。

## Github Action（自动化实现）

GitHub Actions 是 GitHub 提供的一项功能，允许你在 GitHub 上托管的代码仓库中创建自定义的工作流（workflows）。这些工作流可以自动化各种软件开发过程中的任务，比如构建、测试和部署代码。通过 GitHub Actions，开发者可以在代码提交、合并请求或定时触发等条件下自动运行特定的任务。

### 核心概念

1. **Workflow（工作流）**：一个工作流是自动化过程的集合，由一个或多个作业组成。工作流通过 `.github/workflows` 目录下的 YAML 文件定义，并在 GitHub 仓库中配置。工作流可以根据不同的事件触发，如推送代码、创建拉取请求等。

2. **Job（作业）**：作业是工作流中的一个步骤集合。一个工作流可以包含一个或多个作业，每个作业都会在一个新鲜的虚拟机上运行或者是在同一个执行器中并行/串行地运行。

3. **Step（步骤）**：步骤是作业中的命令或动作。步骤可以是运行一些 shell 命令、使用 GitHub 社区分享的操作（actions），或者你自己的操作。

4. **Action（操作）**：操作是用于执行复杂但常见的任务的可重用单元，例如设置语言环境、打包代码等。你可以使用 GitHub 社区提供的操作，也可以编写自己的操作。

5. **Runner（运行器）**：runner 是执行你的工作流的机器。GitHub 提供了 Ubuntu Linux、Windows 和 macOS 的 runner，你也可以托管自己的 runner。

我们本次创建个人Blog所需要的就是在仓库根路径中加入`.github/workflows`下配置一个yml文件，实现每次push触发推送：
```yml
name: Deploy to GitHub Pages

on:
  push: # 每次push就会触发workflows
    branches:
      - main
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write # 修改为 write 权限
      pages: write
      id-token: write

    steps:
      - name: 🚀 Checkout 源码
        uses: actions/checkout@v4

      - name: 🧱 设置 Node.js 环境
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'

      - name: 📦 安装依赖
        run: npm install

      - name: 🔧 构建项目
        run: npm run build

      - name: 🚀 部署到 GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: .vuepress/dist
          commit_message: 'Deploy to GitHub Pages'
          publish_branch: gh-pages  # 可选，默认就是 gh-pages，可以省略
```



# 实现流程

### 1. npm安装vuepress

### 2. 创建分支并配置github page

### 3. 配置自动化sh脚本

# 出现问题

#### 为毛我已经把vuepress的项目push到github上面了，github page也配置好main做page的source了，跳转就是404呢？

因为github page最终要的是vue而不是vuepress，vuepress是生成vue的脚手架，在使用vuepress执行命令`npm run build`后，在`.vuepress/dist`文件夹里面的才是我们要的blog页面，你需要将这个vue给push到你的github仓库里面才能够发布出来。并且这个vue所在的仓库的github page才是最终看得到的静态web！（当然你放另一个分支里，然后在github的setting --> page里面指定好对应的分支也是完全没问题的）

如果是做额外的分支来存储vue的，记得把分支里面清空了再push进去/执行自动化sh文件。

#### github page要选Action吗？

这里我没用，因为我是把vue放到另一个分支的，如果是vuepress大概不需要，和ai一起在`.github/workflows/`下写个sh脚本即可，如果是hugo之类的可以试试（=。=）

#### private不行吗？

假如是分开两个仓库，一个vuepress推送vue到另一个仓库的话，作为vue的仓库一定要public（当然不public也开不了page）我是将两个全放一个仓库里面了，所以必须public